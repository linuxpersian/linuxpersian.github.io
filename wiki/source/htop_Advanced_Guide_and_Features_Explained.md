# 📊 راهنمای کامل و پیشرفته htop: معرفی کامل گزینه‌ها، قابلیت‌ها و روش استفاده

## 🔷 htop چیست؟

`htop` یک **برنامه‌ی تعاملی و گرافیکی در ترمینال** است که برای نمایش اطلاعات مربوط به **فرآیندهای سیستم، مصرف منابع، وضعیت پردازنده، حافظه و سایر جزئیات سیستمی** استفاده می‌شود.
این ابزار از نظر عملکرد شبیه به دستور `top` است، ولی بسیار **قابل‌فهم‌تر، تعاملی‌تر، و کاربرپسندتر** می‌باشد.

---

## 🖥️ اجرای htop

برای اجرای htop در ترمینال کافی‌ست:

```bash
htop
```

اگر htop نصب نشده باشد، آن را می‌توانید با استفاده از دستور زیر نصب کنید:

```bash
# در Arch Linux
sudo pacman -S htop

# در Debian/Ubuntu
sudo apt install htop

# در Fedora/RHEL
sudo dnf install htop
```

---

## 📋 نمای کلی رابط htop

هنگام اجرای `htop`، صفحه به سه بخش اصلی تقسیم می‌شود:

1. **نوار بالایی (System Meters)**: نشان‌دهنده استفاده از CPU، RAM، Swap و Load Average.
2. **لیست فرآیندها (Process List)**: فهرستی از تمامی پردازش‌های در حال اجرا.
3. **نوار پایین (Key Menu)**: فهرستی از کلیدهای میانبر قابل استفاده برای تعامل با `htop`.

---

## 🔑 کلیدها و گزینه‌های موجود در پایین htop

در پایین htop، تعدادی کلید میانبر نمایش داده می‌شود. این کلیدها عملکردهای مختلف را فعال می‌کنند. در ادامه، آن‌ها را به‌طور کامل توضیح می‌دهم:

| کلید  | عملکرد | توضیحات                                                                                |
| ----- | ------ | -------------------------------------------------------------------------------------- |
| `F1`  | Help   | راهنمای htop را نمایش می‌دهد.                                                          |
| `F2`  | Setup  | منوی تنظیمات برای سفارشی‌سازی نمایش.                                                   |
| `F3`  | Search | جستجوی یک فرآیند بر اساس نام.                                                          |
| `F4`  | Filter | فیلتر کردن بر اساس رشته. فرآیندهایی که نام‌شان با رشته مطابقت دارد نمایش داده می‌شوند. |
| `F5`  | Tree   | نمایش فرآیندها به صورت درختی (parent-child).                                           |
| `F6`  | SortBy | مرتب‌سازی لیست بر اساس ستون دلخواه (مثل %CPU یا Memory).                               |
| `F7`  | Nice-  | کاهش مقدار nice (افزایش اولویت اجرای فرآیند). نیاز به مجوز root دارد.                  |
| `F8`  | Nice+  | افزایش مقدار nice (کاهش اولویت اجرای فرآیند).                                          |
| `F9`  | Kill   | ارسال سیگنال به فرآیند (مثلاً SIGTERM یا SIGKILL).                                     |
| `F10` | Quit   | خروج از htop.                                                                          |

---

## 🧠 جزئیات بخش‌های htop

### 1. نوار وضعیت سیستم (System Meters)

در بالای htop، معمولاً موارد زیر را می‌بینید:

* **CPU\[0..n]**: میزان استفاده از هر هسته CPU.
* **Mem**: استفاده از RAM.
* **Swp**: استفاده از فضای swap.
* **Tasks**: تعداد کل فرآیندها، تعداد فعال، خواب، zombie و غیره.
* **Load average**: بار متوسط سیستم در 1، 5 و 15 دقیقه گذشته.
* **Uptime**: مدت زمان روشن بودن سیستم.

### 2. لیست فرآیندها (Process List)

هر خط مربوط به یک فرآیند در حال اجراست. ستون‌های مهم:

| ستون    | توضیح                                         |
| ------- | --------------------------------------------- |
| PID     | شناسه فرآیند                                  |
| USER    | نام کاربری اجراکننده فرآیند                   |
| PRI     | اولویت فرآیند                                 |
| NI      | مقدار nice                                    |
| VIRT    | حافظه مجازی استفاده‌شده                       |
| RES     | حافظه واقعی استفاده‌شده                       |
| SHR     | حافظه مشترک                                   |
| S       | وضعیت فرآیند (Sleeping, Running, Zombie و...) |
| CPU%    | درصد استفاده از CPU                           |
| MEM%    | درصد استفاده از RAM                           |
| TIME+   | زمان CPU مصرف‌شده                             |
| Command | فرمان اجراشده                                 |

---

## ⚙️ تنظیمات htop با `F2`

با زدن کلید `F2` وارد **منوی تنظیمات (Setup)** می‌شوید. این بخش شامل موارد زیر است:

1. **Meters**: تغییر نحوه نمایش استفاده از منابع (CPU, Memory, Swap).
2. **Display Options**: تنظیمات نمایشی مانند نمایش درختی یا نام کامل فرمان‌ها.
3. **Colors**: انتخاب تم رنگی htop.
4. **Columns**: اضافه یا حذف ستون‌های موجود در جدول فرآیندها.
5. **Available Columns**: انتخاب ستون‌هایی که می‌خواهید به جدول اضافه کنید.
6. **Save**: ذخیره تغییرات پیکربندی برای اجراهای بعدی.

---

## 🛠️ قابلیت‌های تخصصی htop

### ✅ فیلتر و جستجو

* `F3`: جستجوی نام فرآیند
* `F4`: فیلتر فرآیندها بر اساس رشته

### ✅ مرتب‌سازی پویا

* `F6`: انتخاب ستونی که بر اساس آن مرتب‌سازی انجام شود.
* مثال: اگر `%MEM` را انتخاب کنید، فرآیندهایی که بیشترین رم مصرف می‌کنند در بالا ظاهر می‌شوند.

### ✅ مدیریت فرآیندها

* `F9`: کشتن فرآیند (Kill)

  * پس از زدن F9، لیستی از سیگنال‌ها ظاهر می‌شود.
  * مثال‌ها:

    * `SIGTERM` (پایان امن)
    * `SIGKILL` (کشتن فوری)
    * `SIGHUP` (بارگذاری مجدد)

### ✅ تغییر اولویت فرآیند

* `F7/F8`: کاهش یا افزایش nice.
  مقدار nice از -20 (بالاترین اولویت) تا 19 (کمترین اولویت) متغیر است.

### ✅ حالت درختی (Tree Mode)

* `F5`: فعال/غیرفعال‌سازی نمایش سلسله‌مراتبی فرآیندها (فرآیند مادر و فرزندانش)

---

## 📁 قابلیت ذخیره تنظیمات

اگر می‌خواهید تنظیمات خود را حفظ کنید:

```bash
~/.config/htop/htoprc
```

این فایل پیکربندی شامل تمامی تغییرات انجام‌شده در منوی Setup است.

---

## 📦 سایر ویژگی‌های مهم htop

| قابلیت                         | توضیح                                                 |
| ------------------------------ | ----------------------------------------------------- |
| پشتیبانی از ماوس               | می‌توانید با کلیک روی گزینه‌ها و فرآیندها تعامل کنید. |
| چندگانه‌سازی CPU               | نمایش جداگانه‌ی هر هسته CPU                           |
| مانیتورینگ GPU (در صورت تنظیم) | با استفاده از htop + nvidia-smi یا پلاگین‌های سفارشی  |
| امکان اجرا با سطح دسترسی root  | برای مدیریت فرآیندهای سیستمی                          |

---

## 🧪 اگر نیاز به اطلاعات بیشتر داشتی…

در صورت تمایل، می‌توانم موارد پیشرفته‌تری را نیز برایت باز کنم، مانند:

* نحوه افزودن مانیتور GPU به htop
* ایجاد رنگ‌بندی سفارشی برای نمایش فرآیندها
* بررسی تفاوت htop با ابزارهایی مانند `glances`، `atop` و `bpytop`
* خواندن دقیق Load Average و تفسیر آن در سرورهای سنگین

---
