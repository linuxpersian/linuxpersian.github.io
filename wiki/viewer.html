<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ÿà€åŸà€åÿ± ŸÖÿßÿ±⁄©‚ÄåÿØÿßŸÜ - Ÿà€å⁄©€å ŸÑ€åŸÜŸà⁄©ÿ≥ ŸÅÿßÿ±ÿ≥€å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿßÿµŸÑ€å */
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿ´ÿßŸÜŸà€åŸá */
            --secondary: #625B71;
            --on-secondary: #FFFFFF;
            --secondary-container: #E8DEF8;
            --on-secondary-container: #1D192B;
            
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿ™ÿ±ÿ¥€åÿßÿ±€å */
            --tertiary: #7D5260;
            --on-tertiary: #FFFFFF;
            --tertiary-container: #FFD8E4;
            --on-tertiary-container: #31111D;
            
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ÿÆÿ∑ÿß */
            --error: #B3261E;
            --on-error: #FFFFFF;
            --error-container: #F9DEDC;
            --on-error-container: #410E0B;
            
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá */
            --background: #FFFBFE;
            --on-background: #1C1B1F;
            --surface: #FFFBFE;
            --on-surface: #1C1B1F;
            --surface-variant: #E7E0EC;
            --on-surface-variant: #49454F;
            --outline: #79747E;
            --outline-variant: #CAC4D0;
            --shadow: #000000;
            --inverse-surface: #313033;
            --inverse-on-surface: #F4EFF4;
            --inverse-primary: #D0BCFF;
            --surface-tint: #6750A4;
            
            /* ÿ±ŸÜ⁄Ø‚ÄåŸáÿß€å ŸÖŸàŸÅŸÇ€åÿ™ Ÿà Ÿáÿ¥ÿØÿßÿ± */
            --success: #388E3C;
            --on-success: #FFFFFF;
            --warning: #F57C00;
            --on-warning: #FFFFFF;
            
            /* ÿ™ŸÖ‚ÄåŸáÿß€å ÿ±ŸÜ⁄Ø€å ÿ¨ÿØ€åÿØ */
            --theme-blue: #1E88E5;
            --theme-green: #43A047;
            --theme-red: #E53935;
            --theme-orange: #FB8C00;
            --theme-purple: #8E24AA;
            --theme-teal: #00897B;
            --theme-amber: #FFB300;
            --theme-pink: #D81B60;
            --theme-indigo: #3949AB;
        }
        
        body.dark-mode {
            --primary: #D0BCFF;
            --on-primary: #381E72;
            --primary-container: #4F378B;
            --on-primary-container: #EADDFF;
            --secondary: #CCC2DC;
            --on-secondary: #332D41;
            --secondary-container: #4A4458;
            --on-secondary-container: #E8DEF8;
            --tertiary: #EFB8C8;
            --on-tertiary: #492532;
            --tertiary-container: #633B48;
            --on-tertiary-container: #FFD8E4;
            --error: #F2B8B5;
            --on-error: #601410;
            --error-container: #8C1D18;
            --on-error-container: #F9DEDC;
            --background: #1C1B1F;
            --on-background: #E6E1E6;
            --surface: #1C1B1F;
            --on-surface: #E6E1E6;
            --surface-variant: #49454F;
            --on-surface-variant: #CAC4D0;
            --outline: #938F99;
            --inverse-surface: #E6E1E6;
            --inverse-on-surface: #313033;
            --inverse-primary: #6750A4;
            --surface-tint: #D0BCFF;
            --success: #4CAF50;
            --on-success: #FFFFFF;
            --warning: #FF9800;
            --on-warning: #FFFFFF;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, var(--primary-container) 0%, var(--tertiary-container) 100%);
            color: var(--on-background);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        
        /* ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ⁄©ŸÑ€å */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        @keyframes highlight {
            0% { background-color: rgba(255, 255, 0, 0.4); }
            100% { background-color: rgba(255, 255, 0, 0); }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 5px var(--primary); }
            50% { box-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary); }
            100% { box-shadow: 0 0 5px var(--primary); }
        }
        
        /* ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿÆŸàÿßŸÜÿØŸÜ */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--outline-variant);
            z-index: 1000;
        }
        
        .reading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--tertiary));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* ⁄©ÿßŸÜÿ™€åŸÜÿ± ÿßÿµŸÑ€å */
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease;
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.5s ease;
        }
        
        .dark-mode .container {
            background: rgba(28, 27, 31, 0.95);
        }
        
        /* ŸáÿØÿ± */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--outline-variant);
            padding: 1.5rem;
            border-radius: 1.5rem 1.5rem 0 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.5s ease;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .header-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--on-surface);
            flex-grow: 1;
            text-align: center;
            background: linear-gradient(90deg, var(--primary), var(--tertiary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* ŸÜŸàÿßÿ± ÿßÿ®ÿ≤ÿßÿ± */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            animation: slideDown 0.6s ease;
        }
        
        .toolbar-section {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß */
        .btn {
            background: var(--secondary-container);
            color: var(--on-secondary-container);
            border: none;
            border-radius: 1rem;
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            background: var(--primary);
            color: var(--on-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(103, 80, 164, 0.3);
        }
        
        .btn-primary {
            background: var(--primary);
            color: var(--on-primary);
            box-shadow: 0 2px 8px rgba(103, 80, 164, 0.3);
        }
        
        .btn-primary:hover {
            box-shadow: 0 4px 12px rgba(103, 80, 164, 0.4);
        }
        
        .btn-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ÿ¨ÿ≥ÿ™ÿ¨Ÿà */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 500px;
        }
        
        .search-input {
            width: 100%;
            background: var(--surface-variant);
            color: var(--on-surface-variant);
            border: 2px solid var(--outline-variant);
            border-radius: 2rem;
            padding: 0.8rem 1rem 0.8rem 3rem;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(103, 80, 164, 0.1);
            outline: none;
        }
        
        .search-btn {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: var(--on-primary);
            border: none;
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 2px 8px rgba(103, 80, 164, 0.4);
        }
        
        /* ŸÖÿ≠ÿ™Ÿàÿß€å ÿßÿµŸÑ€å */
        .content-wrapper {
            display: flex;
            gap: 2rem;
            animation: fadeIn 0.7s ease;
        }
        
        .main-content {
            flex: 1;
            min-width: 0;
        }
        
        .sidebar {
            width: 300px;
            flex-shrink: 0;
            position: sticky;
            top: 120px;
            height: fit-content;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }
        
        /* ŸÖÿßÿ±⁄©‚ÄåÿØÿßŸÜ */
        .markdown-content {
            background: var(--surface);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            line-height: 1.8;
            direction: rtl;
            text-align: justify;
            position: relative;
            overflow: hidden;
        }
        
        .markdown-content::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary), var(--tertiary));
            opacity: 0.1;
            border-radius: 0 0 0 100%;
        }
        
        .markdown-content h1 {
            color: var(--primary);
            font-size: 2.2rem;
            font-weight: 700;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--primary);
            position: relative;
        }
        
        .markdown-content h1::after {
            content: '';
            position: absolute;
            bottom: -3px;
            right: 0;
            width: 50px;
            height: 3px;
            background: var(--tertiary);
        }
        
        .markdown-content h2 {
            color: var(--on-surface);
            font-size: 1.8rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--outline-variant);
        }
        
        .markdown-content h3 {
            color: var(--on-surface);
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 0.8rem;
        }
        
        .markdown-content p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .markdown-content ul, .markdown-content ol {
            margin: 1rem 0;
            padding-right: 1.5rem;
        }
        
        .markdown-content li {
            margin-bottom: 0.5rem;
            position: relative;
        }
        
        .markdown-content li::before {
            content: '‚Ä¢';
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            right: -1rem;
        }
        
        .markdown-content blockquote {
            border-right: 4px solid var(--primary);
            margin: 1.5rem 0;
            padding: 1rem 1.5rem;
            background: var(--primary-container);
            border-radius: 0 1rem 1rem 0;
            font-style: italic;
            position: relative;
        }
        
        .markdown-content blockquote::before {
            content: '"';
            font-size: 3rem;
            color: var(--primary);
            opacity: 0.3;
            position: absolute;
            top: -10px;
            right: 10px;
        }
        
        .markdown-content code {
            background: var(--surface-variant);
            padding: 0.2rem 0.5rem;
            border-radius: 0.3rem;
            font-family: monospace;
            font-size: 0.9em;
            color: var(--primary);
        }
        
        .markdown-content pre {
            background: var(--surface-variant);
            padding: 1.5rem;
            border-radius: 1rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .markdown-content pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-radius: 1rem;
            overflow: hidden;
        }
        
        .markdown-content th, .markdown-content td {
            border: 1px solid var(--outline-variant);
            padding: 0.8rem;
            text-align: right;
        }
        
        .markdown-content th {
            background: var(--secondary-container);
            font-weight: 600;
            color: var(--on-secondary-container);
        }
        
        .markdown-content tr:nth-child(even) {
            background: var(--surface-variant);
        }
        
        .markdown-content img {
            max-width: 100%;
            height: auto;
            border-radius: 1rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .markdown-content img:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .markdown-content a {
            color: var(--primary);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .markdown-content a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }
        
        .markdown-content a:hover {
            color: var(--primary-container);
        }
        
        .markdown-content a:hover::after {
            width: 100%;
        }
        
        /* ŸÜŸàÿßÿ± ⁄©ŸÜÿßÿ±€å */
        .sidebar-section {
            background: var(--surface);
            border-radius: 1.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .sidebar-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--on-surface);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* ÿ™⁄Ø‚ÄåŸáÿß */
        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .tag {
            background: var(--secondary-container);
            color: var(--on-secondary-container);
            padding: 0.4rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tag::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .tag:hover::before {
            width: 100px;
            height: 100px;
        }
        
        .tag:hover {
            background: var(--primary);
            color: var(--on-primary);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 8px rgba(103, 80, 164, 0.3);
        }
        
        .tag.active {
            background: var(--primary);
            color: var(--on-primary);
            animation: pulse 2s infinite;
        }
        
        /* ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ® */
        .toc {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        .toc::-webkit-scrollbar {
            width: 6px;
        }
        
        .toc::-webkit-scrollbar-track {
            background: var(--surface-variant);
            border-radius: 3px;
        }
        
        .toc::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        .toc-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--outline-variant);
            transition: all 0.3s ease;
        }
        
        .toc-item:hover {
            padding-right: 0.5rem;
        }
        
        .toc-item:last-child {
            border-bottom: none;
        }
        
        .toc-link {
            color: var(--on-surface-variant);
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .toc-link::before {
            content: '‚ñ∂';
            position: absolute;
            right: -1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7rem;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .toc-link:hover {
            color: var(--primary);
            padding-right: 0.5rem;
        }
        
        .toc-link:hover::before {
            opacity: 1;
            right: -1.5rem;
        }
        
        .toc-link.active {
            color: var(--primary);
            font-weight: 600;
            padding-right: 0.5rem;
        }
        
        .toc-link.active::before {
            opacity: 1;
            right: -1.5rem;
        }
        
        /* ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖŸÇÿßŸÑŸá */
        .meta-info {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--on-surface-variant);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .meta-item:hover {
            color: var(--primary);
            transform: translateX(-5px);
        }
        
        .meta-item i {
            color: var(--primary);
            transition: all 0.3s ease;
        }
        
        .meta-item:hover i {
            transform: scale(1.2);
        }
        
        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿ¥ŸÜÿßŸàÿ± */
        .fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--on-primary);
            border: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            z-index: 100;
            animation: float 3s ease-in-out infinite;
        }
        
        .fab:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            animation: glow 2s ease-in-out infinite;
        }
        
        /* ŸÖŸàÿØÿßŸÑ‚ÄåŸáÿß */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease forwards;
        }
        
        .modal-content {
            background: var(--surface);
            padding: 2rem;
            border-radius: 2rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s ease forwards;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
        }
        
        .close-button {
            position: absolute;
            top: 15px;
            left: 20px;
            color: var(--outline);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-button:hover {
            color: var(--on-surface);
            transform: rotate(90deg);
        }
        
        /* ÿßÿπŸÑÿßŸÜ‚ÄåŸáÿß */
        .toast-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }
        
        .toast {
            background: var(--inverse-surface);
            color: var(--inverse-on-surface);
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(20px);
            animation: toast-fade-in 0.3s forwards, toast-fade-out 0.3s 2.7s forwards;
            min-width: 250px;
            text-align: center;
            font-size: 0.9rem;
            pointer-events: auto;
            position: relative;
            overflow: hidden;
        }
        
        .toast::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
        }
        
        .toast.error::before {
            background: var(--error);
        }
        
        .toast.success::before {
            background: var(--success);
        }
        
        .toast.error {
            background: var(--error);
            color: var(--on-error);
        }
        
        .toast.success {
            background: var(--success);
            color: var(--on-success);
        }
        
        @keyframes toast-fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes toast-fade-out {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(20px); }
        }
        
        /* ÿ™ŸÖ‚ÄåŸáÿß€å ÿ±ŸÜ⁄Ø€å */
        .theme-selector {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .theme-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .theme-option:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .theme-option.active {
            border-color: var(--on-surface);
            transform: scale(1.2);
        }
        
        .theme-option.active::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
        }
        
        .theme-default { background: var(--primary); }
        .theme-blue { background: var(--theme-blue); }
        .theme-green { background: var(--theme-green); }
        .theme-red { background: var(--theme-red); }
        .theme-orange { background: var(--theme-orange); }
        .theme-purple { background: var(--theme-purple); }
        .theme-teal { background: var(--theme-teal); }
        .theme-amber { background: var(--theme-amber); }
        .theme-pink { background: var(--theme-pink); }
        .theme-indigo { background: var(--theme-indigo); }
        
        /* ÿ≠ÿßŸÑÿ™‚ÄåŸáÿß€å ŸÜŸÖÿß€åÿ¥ */
        .view-mode-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .view-mode-btn {
            background: var(--surface-variant);
            color: var(--on-surface-variant);
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .view-mode-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .view-mode-btn:hover::before {
            width: 100px;
            height: 100px;
        }
        
        .view-mode-btn:hover {
            background: var(--primary);
            color: var(--on-primary);
            transform: translateY(-2px);
        }
        
        .view-mode-btn.active {
            background: var(--primary);
            color: var(--on-primary);
            animation: pulse 2s infinite;
        }
        
        /* ÿ≠ÿßŸÑÿ™ ÿÆŸàÿßŸÜÿØŸÜ */
        body.reading-mode .sidebar {
            display: none;
        }
        
        body.reading-mode .markdown-content {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.1rem;
            line-height: 2;
        }
        
        /* ÿ≠ÿßŸÑÿ™ ÿ¥ÿ® */
        body.night-mode {
            --primary: #BB86FC;
            --on-primary: #000000;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --background: #121212;
            --on-background: #E6E1E6;
            --surface: #1E1E1E;
            --on-surface: #E6E1E6;
            --surface-variant: #49454F;
            --on-surface-variant: #CAC4D0;
        }
        
        /* ÿ≠ÿßŸÑÿ™ ÿ™ŸÖÿ±⁄©ÿ≤ */
        body.focus-mode .header,
        body.focus-mode .toolbar,
        body.focus-mode .sidebar {
            display: none;
        }
        
        body.focus-mode .container {
            max-width: 900px;
            margin: 1rem auto;
        }
        
        /* Ÿáÿß€åŸÑÿß€åÿ™ ÿ¨ÿ≥ÿ™ÿ¨Ÿà */
        .search-highlight {
            background: rgba(255, 255, 0, 0.4);
            padding: 0 2px;
            border-radius: 2px;
            animation: highlight 1s ease;
        }
        
        /* ⁄©Ÿæ€å ⁄©ÿØ */
        .copy-code-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--primary);
            color: var(--on-primary);
            border: none;
            border-radius: 0.5rem;
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        pre:hover .copy-code-btn {
            opacity: 1;
        }
        
        .copy-code-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(103, 80, 164, 0.4);
        }
        
        /* ŸÑÿß€åÿ™‚Äåÿ®ÿß⁄©ÿ≥ ÿ™ÿµÿßŸà€åÿ± */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            cursor: pointer;
            animation: fadeIn 0.3s ease;
        }
        
        .lightbox img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 1rem;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
            animation: slideUp 0.5s ease;
        }
        
        /* ŸÜÿ∏ÿ±ÿßÿ™ */
        .comments-section {
            margin-top: 3rem;
            animation: fadeIn 0.8s ease;
        }
        
        .comment-form {
            background: var(--surface-variant);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .comment-form::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary), var(--tertiary));
            opacity: 0.1;
            border-radius: 0 0 0 100%;
        }
        
        .comment-input {
            width: 100%;
            background: var(--surface);
            color: var(--on-surface);
            border: 2px solid var(--outline-variant);
            border-radius: 1rem;
            padding: 1rem;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .comment-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(103, 80, 164, 0.1);
        }
        
        .comment {
            background: var(--surface);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .comment::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--tertiary));
            opacity: 0.1;
            border-radius: 0 0 0 50%;
        }
        
        .comment:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--on-surface);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .comment-author::before {
            content: 'üë§';
            font-size: 1.2rem;
        }
        
        .comment-date {
            font-size: 0.85rem;
            color: var(--on-surface-variant);
        }
        
        .comment-text {
            color: var(--on-surface);
            line-height: 1.6;
        }
        
        /* ÿ±€åÿ≥ŸæÿßŸÜÿ≥€åŸà */
        @media (max-width: 1024px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
                position: static;
                max-height: none;
            }
            
            .main-content {
                order: 1;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                width: 95%;
                padding: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .header-title {
                font-size: 1.5rem;
                text-align: center;
            }
            
            .toolbar {
                justify-content: center;
            }
            
            .search-container {
                max-width: 100%;
            }
            
            .markdown-content {
                padding: 1.5rem;
            }
            
            .markdown-content h1 {
                font-size: 1.8rem;
            }
            
            .markdown-content h2 {
                font-size: 1.5rem;
            }
            
            .fab {
                bottom: 15px;
                right: 15px;
                width: 48px;
                height: 48px;
            }
        }
        
        /* ÿØÿ≥ÿ™ÿ±ÿ≥€å‚ÄåŸæÿ∞€åÿ±€å */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: var(--on-primary);
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 100;
            transition: top 0.3s ease;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ŸÑŸàÿØ€åŸÜ⁄Ø */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            flex-direction: column;
            gap: 1rem;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--outline-variant);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ⁄ÜÿßŸæ */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .container {
                box-shadow: none;
                margin: 0;
                padding: 0;
            }
            
            .header, .toolbar, .sidebar, .fab, .reading-progress {
                display: none;
            }
            
            .markdown-content {
                box-shadow: none;
                padding: 0;
            }
        }
        
        /* ÿ¥ŸÖÿßÿ±Ÿá ÿÆÿ∑Ÿàÿ∑ ⁄©ÿØ */
        .line-numbers .line-numbers-rows {
            position: absolute;
            pointer-events: none;
            top: 1em;
            font-size: 100%;
            left: -3.8em;
            width: 3em;
            letter-spacing: -1px;
            border-right: 1px solid #999;
            user-select: none;
        }
        
        .line-numbers-rows > span:before {
            content: counter(linenumber);
            counter-increment: linenumber;
            display: block;
            text-align: right;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿÆŸàÿßŸÜÿØŸÜ -->
    <div class="reading-progress">
        <div class="reading-progress-bar" id="readingProgressBar"></div>
    </div>
    
    <!-- ŸÑ€åŸÜ⁄© Ÿæÿ±ÿ¥ ÿ®Ÿá ŸÖÿ≠ÿ™Ÿàÿß ÿ®ÿ±ÿß€å ÿØÿ≥ÿ™ÿ±ÿ≥€å‚ÄåŸæÿ∞€åÿ±€å -->
    <a href="#content" class="skip-link">Ÿæÿ±ÿ¥ ÿ®Ÿá ŸÖÿ≠ÿ™Ÿàÿß</a>
    
    <!-- ⁄©ÿßŸÜÿ™€åŸÜÿ± ÿßÿπŸÑÿßŸÜ‚ÄåŸáÿß -->
    <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>
    
    <!-- ŸáÿØÿ± -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="btn btn-primary">
                <i class="fas fa-home"></i>
                ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å
            </a>
            <h1 class="header-title" id="articleTitle">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</h1>
            <div class="toolbar-section">
                <button class="btn btn-icon" onclick="toggleDarkMode()" title="ÿ™ÿ∫€å€åÿ± ÿ≠ÿßŸÑÿ™ ÿ™ÿßÿ±€å⁄©">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn btn-icon" onclick="shareArticle()" title="ÿßÿ¥ÿ™ÿ±ÿß⁄©‚Äå⁄Øÿ∞ÿßÿ±€å">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button class="btn btn-icon" onclick="window.print()" title="⁄ÜÿßŸæ">
                    <i class="fas fa-print"></i>
                </button>
                <button class="btn btn-icon" onclick="downloadMarkdown()" title="ÿØÿßŸÜŸÑŸàÿØ">
                    <i class="fas fa-download"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- ŸÜŸàÿßÿ± ÿßÿ®ÿ≤ÿßÿ± -->
    <div class="toolbar">
        <div class="toolbar-section">
            <!-- ÿ¨ÿ≥ÿ™ÿ¨Ÿà -->
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ŸÖŸÇÿßŸÑŸá..." aria-label="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ŸÖŸÇÿßŸÑŸá">
                <button class="search-btn" onclick="searchInArticle()" aria-label="ÿ¨ÿ≥ÿ™ÿ¨Ÿà">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
        
        <div class="toolbar-section">
            <!-- ÿ≠ÿßŸÑÿ™‚ÄåŸáÿß€å ŸÜŸÖÿß€åÿ¥ -->
            <div class="view-mode-controls">
                <button class="view-mode-btn active" onclick="setViewMode('normal')" title="ÿ≠ÿßŸÑÿ™ ÿπÿßÿØ€å">
                    <i class="fas fa-file-alt"></i>
                </button>
                <button class="view-mode-btn" onclick="setViewMode('reading')" title="ÿ≠ÿßŸÑÿ™ ÿÆŸàÿßŸÜÿØŸÜ">
                    <i class="fas fa-book-open"></i>
                </button>
                <button class="view-mode-btn" onclick="setViewMode('night')" title="ÿ≠ÿßŸÑÿ™ ÿ¥ÿ®">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="view-mode-btn" onclick="setViewMode('focus')" title="ÿ≠ÿßŸÑÿ™ ÿ™ŸÖÿ±⁄©ÿ≤">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
            
            <!-- ⁄©ŸÜÿ™ÿ±ŸÑ ŸÅŸàŸÜÿ™ -->
            <button class="btn btn-icon" onclick="decreaseFontSize()" title="⁄©ÿßŸáÿ¥ ÿßŸÜÿØÿßÿ≤Ÿá ŸÅŸàŸÜÿ™">
                <i class="fas fa-minus"></i>
            </button>
            <button class="btn btn-icon" onclick="increaseFontSize()" title="ÿßŸÅÿ≤ÿß€åÿ¥ ÿßŸÜÿØÿßÿ≤Ÿá ŸÅŸàŸÜÿ™">
                <i class="fas fa-plus"></i>
            </button>
            
            <!-- TTS -->
            <button class="btn btn-icon" onclick="toggleTTS()" title="ŸÖÿ™ŸÜ ÿ®Ÿá ⁄ØŸÅÿ™ÿßÿ±">
                <i class="fas fa-volume-up"></i>
            </button>
            
            <!-- ÿ™ŸÜÿ∏€åŸÖÿßÿ™ -->
            <button class="btn btn-icon" onclick="openModal('settingsModal')" title="ÿ™ŸÜÿ∏€åŸÖÿßÿ™">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </div>
    
    <!-- ŸÖÿ≠ÿ™Ÿàÿß€å ÿßÿµŸÑ€å -->
    <div class="container">
        <div class="content-wrapper" id="content">
            <!-- ŸÖÿ≠ÿ™Ÿàÿß€å ÿßÿµŸÑ€å -->
            <main class="main-content">
                <div id="markdownContent" class="markdown-content">
                    <div class="loading flex flex-col items-center justify-center py-16">
                        <div class="spinner mb-4"></div>
                        <p class="text-gray-600">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑŸá...</p>
                    </div>
                </div>
                
                <!-- ÿ®ÿÆÿ¥ ŸÜÿ∏ÿ±ÿßÿ™ -->
                <div class="comments-section">
                    <h2>ŸÜÿ∏ÿ±ÿßÿ™ Ÿà ÿ®ÿßÿ≤ÿÆŸàÿ±ÿØ</h2>
                    
                    <!-- ŸÅÿ±ŸÖ ŸÜÿ∏ÿ± -->
                    <div class="comment-form">
                        <h3>ÿßÿ±ÿ≥ÿßŸÑ ŸÜÿ∏ÿ±</h3>
                        <textarea class="comment-input" id="commentInput" placeholder="ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿß€åŸÜÿ¨ÿß ÿ®ŸÜŸà€åÿ≥€åÿØ..." aria-label="ŸÖÿ™ŸÜ ŸÜÿ∏ÿ±"></textarea>
                        <button class="btn btn-primary" onclick="submitComment()">
                            <i class="fas fa-paper-plane"></i>
                            ÿßÿ±ÿ≥ÿßŸÑ ŸÜÿ∏ÿ±
                        </button>
                    </div>
                    
                    <!-- ŸÑ€åÿ≥ÿ™ ŸÜÿ∏ÿ±ÿßÿ™ -->
                    <div id="commentsList">
                        <!-- ŸÜÿ∏ÿ±ÿßÿ™ ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿ¨ÿßŸàÿß ÿßÿ≥⁄©ÿ±€åŸæÿ™ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ -->
                    </div>
                </div>
            </main>
            
            <!-- ŸÜŸàÿßÿ± ⁄©ŸÜÿßÿ±€å -->
            <aside class="sidebar">
                <!-- ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ® -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-list"></i>
                        ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ®
                    </h3>
                    <div class="toc" id="tableOfContents">
                        <!-- ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ® ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿ¨ÿßŸàÿß ÿßÿ≥⁄©ÿ±€åŸæÿ™ ÿ™ŸàŸÑ€åÿØ ŸÖ€å‚Äåÿ¥ŸàÿØ -->
                    </div>
                </div>
                
                <!-- ÿ™⁄Ø‚ÄåŸáÿß -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-tags"></i>
                        ÿ™⁄Ø‚ÄåŸáÿß
                    </h3>
                    <div class="tag-cloud" id="tagsCloud">
                        <!-- ÿ™⁄Ø‚ÄåŸáÿß ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿ¨ÿßŸàÿß ÿßÿ≥⁄©ÿ±€åŸæÿ™ ÿ™ŸàŸÑ€åÿØ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ -->
                    </div>
                </div>
                
                <!-- ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖŸÇÿßŸÑŸá -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-info-circle"></i>
                        ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖŸÇÿßŸÑŸá
                    </h3>
                    <div class="meta-info">
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span id="metaDate">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-clock"></i>
                            <span id="metaReadingTime">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-file-word"></i>
                            <span id="metaWordCount">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-eye"></i>
                            <span id="metaViews">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-star"></i>
                            <span id="metaRating">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</span>
                        </div>
                    </div>
                </div>
                
                <!-- ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑ -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <i class="fas fa-bookmark"></i>
                        ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑
                    </h3>
                    <div id="relatedArticles">
                        <!-- ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑ ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿ¨ÿßŸàÿß ÿßÿ≥⁄©ÿ±€åŸæÿ™ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ -->
                    </div>
                </div>
            </aside>
        </div>
    </div>
    
    <!-- ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿ¥ŸÜÿßŸàÿ± -->
    <button class="fab" onclick="scrollToTop()" title="ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿ®ÿßŸÑÿß">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <button class="fab" style="bottom: 90px;" onclick="toggleBookmark()" title="ŸÜÿ¥ÿßŸÜ‚Äå⁄Øÿ∞ÿßÿ±€å">
        <i class="fas fa-bookmark" id="bookmarkIcon"></i>
    </button>
    
    <!-- ŸÑÿß€åÿ™‚Äåÿ®ÿß⁄©ÿ≥ ÿ™ÿµÿßŸà€åÿ± -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <img src="" alt="" id="lightboxImage">
    </div>
    
    <!-- ŸÖŸàÿØÿßŸÑ ÿ™ŸÜÿ∏€åŸÖÿßÿ™ -->
    <div id="settingsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="settingsModalTitle">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('settingsModal')" aria-label="ÿ®ÿ≥ÿ™ŸÜ">&times;</span>
            <h3 id="settingsModalTitle" class="text-2xl font-bold mb-4">ÿ™ŸÜÿ∏€åŸÖÿßÿ™</h3>
            
            <!-- ÿ™ŸÖ ÿ±ŸÜ⁄Ø€å -->
            <div class="mb-4">
                <h4 class="text-lg font-semibold mb-2">ÿ™ŸÖ ÿ±ŸÜ⁄Ø€å</h4>
                <div class="theme-selector">
                    <div class="theme-option theme-default active" onclick="setTheme('default')"></div>
                    <div class="theme-option theme-blue" onclick="setTheme('blue')"></div>
                    <div class="theme-option theme-green" onclick="setTheme('green')"></div>
                    <div class="theme-option theme-red" onclick="setTheme('red')"></div>
                    <div class="theme-option theme-orange" onclick="setTheme('orange')"></div>
                    <div class="theme-option theme-purple" onclick="setTheme('purple')"></div>
                    <div class="theme-option theme-teal" onclick="setTheme('teal')"></div>
                    <div class="theme-option theme-amber" onclick="setTheme('amber')"></div>
                    <div class="theme-option theme-pink" onclick="setTheme('pink')"></div>
                    <div class="theme-option theme-indigo" onclick="setTheme('indigo')"></div>
                </div>
            </div>
            
            <!-- ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ŸÅŸàŸÜÿ™ -->
            <div class="mb-4">
                <h4 class="text-lg font-semibold mb-2">ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ŸÅŸàŸÜÿ™</h4>
                <div class="flex items-center gap-4">
                    <label>
                        <input type="checkbox" id="justifyText" checked> ÿ™ÿ±ÿßÿ≤ ŸÖÿ™ŸÜ
                    </label>
                    <label>
                        <input type="checkbox" id="lineNumbers" checked> ÿ¥ŸÖÿßÿ±Ÿá ÿÆÿ∑Ÿàÿ∑ ⁄©ÿØ
                    </label>
                </div>
            </div>
            
            <!-- ÿ™ŸÜÿ∏€åŸÖÿßÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá -->
            <div class="mb-4">
                <h4 class="text-lg font-semibold mb-2">ÿ™ŸÜÿ∏€åŸÖÿßÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá</h4>
                <div class="flex items-center gap-4">
                    <label>
                        <input type="checkbox" id="autoSave" checked> ÿ∞ÿÆ€åÿ±Ÿá ÿÆŸàÿØ⁄©ÿßÿ± ŸÖŸàŸÇÿπ€åÿ™
                    </label>
                    <label>
                        <input type="checkbox" id="loadImages" checked> ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™ÿµÿßŸà€åÿ±
                    </label>
                </div>
            </div>
            
            <button class="btn btn-primary w-full" onclick="saveSettings()">
                <i class="fas fa-save"></i>
                ÿ∞ÿÆ€åÿ±Ÿá ÿ™ŸÜÿ∏€åŸÖÿßÿ™
            </button>
        </div>
    </div>
    
    <script>
        // ŸÖÿ™ÿ∫€åÿ±Ÿáÿß€å ÿßÿµŸÑ€å
        let currentFile = null;
        let currentContent = null;
        let isDarkMode = false;
        let fontSize = 16;
        let ttsEnabled = false;
        let currentViewMode = 'normal';
        let isBookmarked = false;
        let searchHighlights = [];
        let currentSearchIndex = 0;
        let allFileNames = [];
        
        // ÿ≥€åÿ≥ÿ™ŸÖ ÿ™⁄Ø‚ÄåŸáÿß
        const tagSystem = {
            // ÿ™⁄Ø‚ÄåŸáÿß€å ⁄©ÿßŸÖŸÑ ÿ®ÿß ⁄©ŸÑŸÖÿßÿ™ ⁄©ŸÑ€åÿØ€å
            allTags: {
                // ÿ™Ÿàÿ≤€åÿπ‚ÄåŸáÿß
                'ubuntu': {
                    name: 'ÿßŸàÿ®ŸàŸÜÿ™Ÿà',
                    keywords: ['ubuntu', 'ÿßŸàÿ®ŸàŸÜÿ™Ÿà', 'ÿßÿ®ŸàŸÜÿ™Ÿà', 'ubunto']
                },
                'arch': {
                    name: 'ÿ¢ÿ±⁄Ü ŸÑ€åŸÜŸà⁄©ÿ≥',
                    keywords: ['arch', 'ÿ¢ÿ±⁄Ü', 'ÿßÿ±⁄Ü', 'arch linux']
                },
                'fedora': {
                    name: 'ŸÅÿØŸàÿ±ÿß',
                    keywords: ['fedora', 'ŸÅÿØŸàÿ±ÿß', 'fedora linux']
                },
                'debian': {
                    name: 'ÿØÿ®€åÿßŸÜ',
                    keywords: ['debian', 'ÿØÿ®€åÿßŸÜ', 'ÿØÿ®€åÿßŸÜ ⁄ØŸÜŸà/ŸÑ€åŸÜŸà⁄©ÿ≥']
                },
                'centos': {
                    name: 'ÿ≥ŸÜ‚Äåÿ™€å‚ÄåÿßŸà‚Äåÿßÿ≥',
                    keywords: ['centos', 'ÿ≥ŸÜÿ™Ÿàÿ≥', 'cent os']
                },
                'opensuse': {
                    name: 'ÿßŸàŸæŸÜ‚Äåÿ≥Ÿàÿ≤Ÿá',
                    keywords: ['opensuse', 'ÿßŸàŸæŸÜ ÿ≥Ÿàÿ≤Ÿá', 'suse', 'ÿ≥Ÿàÿ≤Ÿá']
                },
                'mint': {
                    name: 'ŸÑ€åŸÜŸà⁄©ÿ≥ ŸÖ€åŸÜÿ™',
                    keywords: ['mint', 'ŸÖ€åŸÜÿ™', 'linux mint']
                },
                'manjaro': {
                    name: 'ŸÖÿßŸÜÿ¨ÿßÿ±Ÿà',
                    keywords: ['manjaro', 'ŸÖÿßŸÜÿ¨ÿßÿ±Ÿà', 'manjaro linux']
                },
                'elementary': {
                    name: 'ÿßŸÑŸÖŸÜÿ™ÿ±€å',
                    keywords: ['elementary', 'ÿßŸÑŸÖŸÜÿ™ÿ±€å', 'elementary os']
                },
                'zorin': {
                    name: 'ÿ≤Ÿàÿ±€åŸÜ',
                    keywords: ['zorin', 'ÿ≤Ÿàÿ±€åŸÜ', 'zorin os']
                },
                
                // ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™
                'bash': {
                    name: 'ÿ®ÿ¥',
                    keywords: ['bash', 'ÿ®ÿ¥', 'shell', 'ÿ¥ŸÑ', 'terminal', 'ÿ™ÿ±ŸÖ€åŸÜÿßŸÑ']
                },
                'grep': {
                    name: '⁄Øÿ±€åŸæ',
                    keywords: ['grep', '⁄Øÿ±€åŸæ', 'ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ŸÖÿ™ŸÜ']
                },
                'sed': {
                    name: 'ÿ≥ÿØ',
                    keywords: ['sed', 'ÿ≥ÿØ', 'Ÿà€åÿ±ÿß€åÿ¥ ÿ¨ÿ±€åÿßŸÜ€å']
                },
                'awk': {
                    name: 'ÿ¢Ÿà⁄©',
                    keywords: ['awk', 'ÿ¢Ÿà⁄©', 'Ÿæÿ±ÿØÿßÿ≤ÿ¥ ŸÖÿ™ŸÜ']
                },
                'find': {
                    name: 'ŸÅÿß€åŸÜÿØ',
                    keywords: ['find', 'ŸÅÿß€åŸÜÿØ', '€åÿßŸÅÿ™ŸÜ ŸÅÿß€åŸÑ']
                },
                'chmod': {
                    name: '⁄ÜŸÖŸàÿØ',
                    keywords: ['chmod', '⁄ÜŸÖŸàÿØ', 'ÿ™ÿ∫€å€åÿ± ŸÖÿ¨Ÿàÿ≤']
                },
                'chown': {
                    name: '⁄ÜÿßŸàŸÜ',
                    keywords: ['chown', '⁄ÜÿßŸàŸÜ', 'ÿ™ÿ∫€å€åÿ± ŸÖÿßŸÑ⁄©']
                },
                'ssh': {
                    name: 'ÿßÿ≥‚Äåÿßÿ≥‚Äåÿß⁄Ü',
                    keywords: ['ssh', 'ÿßÿ≥ ÿßÿ≥ ÿß⁄Ü', 'ÿßÿ™ÿµÿßŸÑ ÿßŸÖŸÜ']
                },
                'scp': {
                    name: 'ÿßÿ≥‚Äåÿ≥€å‚ÄåŸæ€å',
                    keywords: ['scp', 'ÿßÿ≥ ÿ≥€å Ÿæ€å', '⁄©Ÿæ€å ÿßŸÖŸÜ']
                },
                'rsync': {
                    name: 'ÿ¢ÿ±ÿ≥€åŸÜ⁄©',
                    keywords: ['rsync', 'ÿ¢ÿ± ÿ≥€åŸÜ⁄©', 'ŸáŸÖ⁄ØÿßŸÖ‚Äåÿ≥ÿßÿ≤€å ÿßÿ≤ ÿ±ÿßŸá ÿØŸàÿ±']
                },
                
                // ÿ≥ÿ±Ÿàÿ±Ÿáÿß
                'apache': {
                    name: 'ÿ¢Ÿæÿß⁄Ü€å',
                    keywords: ['apache', 'ÿ¢Ÿæÿß⁄Ü€å', 'httpd', 'Ÿàÿ® ÿ≥ÿ±Ÿàÿ±']
                },
                'nginx': {
                    name: 'ÿßŸÜÿ¨€åŸÜ‚Äåÿß⁄©ÿ≥',
                    keywords: ['nginx', 'ÿßŸÜÿ¨€åŸÜ ÿß⁄©ÿ≥', 'Ÿàÿ® ÿ≥ÿ±Ÿàÿ±']
                },
                'mysql': {
                    name: 'ŸÖÿß€å‚Äåÿßÿ≥‚Äå⁄©€åŸàÿßŸÑ',
                    keywords: ['mysql', 'ŸÖÿß€å ÿßÿ≥ ⁄©€åŸàÿßŸÑ', 'ÿØ€åÿ™ÿßÿ®€åÿ≥']
                },
                'postgresql': {
                    name: 'Ÿæÿ≥ÿ™⁄Øÿ±ÿ≥‚Äå⁄©€åŸàÿßŸÑ',
                    keywords: ['postgresql', 'Ÿæÿ≥ÿ™⁄Øÿ±ÿ≥', 'ÿØ€åÿ™ÿßÿ®€åÿ≥']
                },
                'mongodb': {
                    name: 'ŸÖÿßŸÜ⁄ØŸà‚ÄåÿØ€å‚Äåÿ®€å',
                    keywords: ['mongodb', 'ŸÖÿßŸÜ⁄ØŸà ÿØ€å ÿ®€å', 'ÿØ€åÿ™ÿßÿ®€åÿ≥']
                },
                'redis': {
                    name: 'ÿ±€åÿØ€åÿ≥',
                    keywords: ['redis', 'ÿ±€åÿØ€åÿ≥', 'ÿ≠ÿßŸÅÿ∏Ÿá ŸÜŸáÿßŸÜ']
                },
                'ftp': {
                    name: 'ÿßŸÅ‚Äåÿ™€å‚ÄåŸæ€å',
                    keywords: ['ftp', 'ÿßŸÅ ÿ™€å Ÿæ€å', 'ÿßŸÜÿ™ŸÇÿßŸÑ ŸÅÿß€åŸÑ']
                },
                'samba': {
                    name: 'ÿ≥ÿßŸÖÿ®ÿß',
                    keywords: ['samba', 'ÿ≥ÿßŸÖÿ®ÿß', 'ÿßÿ¥ÿ™ÿ±ÿß⁄© ŸÅÿß€åŸÑ']
                },
                'bind': {
                    name: 'ÿ®ÿß€åŸÜÿØ',
                    keywords: ['bind', 'ÿ®ÿß€åŸÜÿØ', 'ÿØ€å‚ÄåÿßŸÜ‚Äåÿßÿ≥']
                },
                'postfix': {
                    name: 'Ÿæÿ≥ÿ™ŸÅ€å⁄©ÿ≥',
                    keywords: ['postfix', 'Ÿæÿ≥ÿ™ŸÅ€å⁄©ÿ≥', 'ÿ≥ÿ±Ÿàÿ± ÿß€åŸÖ€åŸÑ']
                },
                
                // ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ
                'gnome': {
                    name: '⁄ØŸÜŸàŸÖ',
                    keywords: ['gnome', '⁄ØŸÜŸàŸÖ', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'kde': {
                    name: '⁄©ÿØ€å‚Äåÿß€å',
                    keywords: ['kde', '⁄©ÿØ€å ÿß€å', 'ŸæŸÑÿßÿ≥ŸÖÿß', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'xfce': {
                    name: 'ÿß⁄©ÿ≥‚ÄåÿßŸÅ‚Äåÿ≥€å‚Äåÿß€å',
                    keywords: ['xfce', 'ÿß⁄©ÿ≥ ÿßŸÅ ÿ≥€å ÿß€å', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'lxde': {
                    name: 'ÿßŸÑ‚Äåÿß⁄©ÿ≥‚ÄåÿØ€å‚Äåÿß€å',
                    keywords: ['lxde', 'ÿßŸÑ ÿß⁄©ÿ≥ ÿØ€å ÿß€å', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'cinnamon': {
                    name: 'ÿ≥€åŸÜÿßŸÖŸàŸÜ',
                    keywords: ['cinnamon', 'ÿ≥€åŸÜÿßŸÖŸàŸÜ', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'mate': {
                    name: 'ŸÖ€åÿ™',
                    keywords: ['mate', 'ŸÖ€åÿ™', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'budgie': {
                    name: 'ÿ®ÿßÿ¨€å',
                    keywords: ['budgie', 'ÿ®ÿßÿ¨€å', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'pantheon': {
                    name: 'ŸæÿßŸÜÿ™ÿ¶ŸàŸÜ',
                    keywords: ['pantheon', 'ŸæÿßŸÜÿ™ÿ¶ŸàŸÜ', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'deepin': {
                    name: 'ÿØ€åŸæ€åŸÜ',
                    keywords: ['deepin', 'ÿØ€åŸæ€åŸÜ', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                'unity': {
                    name: '€åŸàŸÜ€åÿ™€å',
                    keywords: ['unity', '€åŸàŸÜ€åÿ™€å', 'ŸÖÿ≠€åÿ∑ ÿØÿ≥⁄©ÿ™ÿßŸæ']
                },
                
                // ÿßŸÖŸÜ€åÿ™
                'firewall': {
                    name: 'ŸÅÿß€åÿ±ŸàÿßŸÑ',
                    keywords: ['firewall', 'ŸÅÿß€åÿ±ŸàÿßŸÑ', 'iptables', 'ufw']
                },
                'selinux': {
                    name: 'ÿßÿ≥‚Äåÿß€å‚ÄåŸÑ€åŸÜŸà⁄©ÿ≥',
                    keywords: ['selinux', 'ÿßÿ≥ ÿß€å ŸÑ€åŸÜŸà⁄©ÿ≥', 'ÿßŸÖŸÜ€åÿ™']
                },
                'apparmor': {
                    name: 'ÿßŸæ‚Äåÿ¢ÿ±ŸÖŸàÿ±',
                    keywords: ['apparmor', 'ÿßŸæ ÿ¢ÿ±ŸÖŸàÿ±', 'ÿßŸÖŸÜ€åÿ™']
                },
                'fail2ban': {
                    name: 'ŸÅ€åŸÑ‚Äåÿ™Ÿà‚Äåÿ®ŸÜ',
                    keywords: ['fail2ban', 'ŸÅ€åŸÑ ÿ™Ÿà ÿ®ŸÜ', 'ÿßŸÖŸÜ€åÿ™']
                },
                'clamav': {
                    name: '⁄©ŸÑŸÖÿßŸà',
                    keywords: ['clamav', '⁄©ŸÑŸÖÿßŸà', 'ÿ¢ŸÜÿ™€å‚ÄåŸà€åÿ±Ÿàÿ≥']
                },
                'gpg': {
                    name: 'ÿ¨€å‚ÄåŸæ€å‚Äåÿ¨€å',
                    keywords: ['gpg', 'ÿ¨€å Ÿæ€å ÿ¨€å', 'ÿ±ŸÖÿ≤ŸÜ⁄Øÿßÿ±€å']
                },
                'openssl': {
                    name: 'ÿßŸàŸæŸÜ‚Äåÿßÿ≥‚Äåÿßÿ≥‚ÄåÿßŸÑ',
                    keywords: ['openssl', 'ÿßŸàŸæŸÜ ÿßÿ≥ ÿßÿ≥ ÿßŸÑ', 'ÿ±ŸÖÿ≤ŸÜ⁄Øÿßÿ±€å']
                },
                'vpn': {
                    name: 'Ÿà€å‚ÄåŸæ€å‚ÄåÿßŸÜ',
                    keywords: ['vpn', 'Ÿà€å Ÿæ€å ÿßŸÜ', 'ÿ¥ÿ®⁄©Ÿá ÿÆÿµŸàÿµ€å ŸÖÿ¨ÿßÿ≤€å']
                },
                'tor': {
                    name: 'ÿ™Ÿàÿ±',
                    keywords: ['tor', 'ÿ™Ÿàÿ±', 'ŸÜÿßÿ¥ŸÜÿßÿ≥ ÿ®ŸàÿØŸÜ']
                },
                'audit': {
                    name: 'ÿßÿØ€åÿ™',
                    keywords: ['audit', 'ÿßÿØ€åÿ™', 'ÿ®ÿßÿ≤ÿ±ÿ≥€å ÿßŸÖŸÜ€åÿ™€å']
                },
                
                // ÿ¥ÿ®⁄©Ÿá
                'networking': {
                    name: 'ÿ¥ÿ®⁄©Ÿá',
                    keywords: ['networking', 'ÿ¥ÿ®⁄©Ÿá', 'network', 'ŸÜÿ™Ÿàÿ±⁄©']
                },
                'netplan': {
                    name: 'ŸÜÿ™‚ÄåŸæŸÑŸÜ',
                    keywords: ['netplan', 'ŸÜÿ™ ŸæŸÑŸÜ', 'Ÿæ€å⁄©ÿ±ÿ®ŸÜÿØ€å ÿ¥ÿ®⁄©Ÿá']
                },
                'networkmanager': {
                    name: 'ŸÖÿØ€åÿ±€åÿ™ ÿ¥ÿ®⁄©Ÿá',
                    keywords: ['networkmanager', 'ŸÖÿØ€åÿ±€åÿ™ ÿ¥ÿ®⁄©Ÿá', 'nmcli']
                },
                'dhcp': {
                    name: 'ÿØ€å‚Äåÿß⁄Ü‚Äåÿ≥€å‚ÄåŸæ€å',
                    keywords: ['dhcp', 'ÿØ€å ÿß⁄Ü ÿ≥€å Ÿæ€å', 'ÿßÿÆÿ™ÿµÿßÿµ ÿ¢€å‚ÄåŸæ€å']
                },
                'dns': {
                    name: 'ÿØ€å‚ÄåÿßŸÜ‚Äåÿßÿ≥',
                    keywords: ['dns', 'ÿØ€å ÿßŸÜ ÿßÿ≥', 'ÿ≥€åÿ≥ÿ™ŸÖ ŸÜÿßŸÖ ÿØÿßŸÖŸÜŸá']
                },
                'proxy': {
                    name: 'Ÿæÿ±ÿß⁄©ÿ≥€å',
                    keywords: ['proxy', 'Ÿæÿ±ÿß⁄©ÿ≥€å', 'ŸÖ€åÿßŸÜÿ¨€å']
                },
                'vlan': {
                    name: 'ŸàŸÑÿßŸÜ',
                    keywords: ['vlan', 'ŸàŸÑÿßŸÜ', 'ÿ¥ÿ®⁄©Ÿá ŸÖÿ≠ŸÑ€å ŸÖÿ¨ÿßÿ≤€å']
                },
                'bridge': {
                    name: 'ÿ®ÿ±€åÿ¨',
                    keywords: ['bridge', 'ÿ®ÿ±€åÿ¨', 'ŸæŸÑ ÿ¥ÿ®⁄©Ÿá']
                },
                'bonding': {
                    name: 'ÿ®ÿßŸÜÿØ€åŸÜ⁄Ø',
                    keywords: ['bonding', 'ÿ®ÿßŸÜÿØ€åŸÜ⁄Ø', 'ÿßÿ™ÿµÿßŸÑ ⁄ÜŸÜÿØ ÿ¥ÿ®⁄©Ÿá']
                },
                'wifi': {
                    name: 'Ÿàÿß€å‚ÄåŸÅÿß€å',
                    keywords: ['wifi', 'Ÿàÿß€å ŸÅÿß€å', 'ÿ®€å‚Äåÿ≥€åŸÖ']
                },
                
                // ÿ™Ÿàÿ≥ÿπŸá
                'git': {
                    name: '⁄Ø€åÿ™',
                    keywords: ['git', '⁄Ø€åÿ™', '⁄©ŸÜÿ™ÿ±ŸÑ ŸÜÿ≥ÿÆŸá']
                },
                'github': {
                    name: '⁄Ø€åÿ™‚ÄåŸáÿßÿ®',
                    keywords: ['github', '⁄Ø€åÿ™ Ÿáÿßÿ®', 'ŸÖÿÆÿ≤ŸÜ ⁄©ÿØ']
                },
                'docker': {
                    name: 'ÿØÿß⁄©ÿ±',
                    keywords: ['docker', 'ÿØÿß⁄©ÿ±', '⁄©ÿßŸÜÿ™€åŸÜÿ±']
                },
                'kubernetes': {
                    name: '⁄©Ÿàÿ®ÿ±ŸÜÿ™€åÿ≤',
                    keywords: ['kubernetes', '⁄©Ÿàÿ®ÿ±ŸÜÿ™€åÿ≤', '⁄©Ÿàÿ®ÿ≤', 'ÿßÿ±⁄©ÿ≥ÿ™ÿ± ⁄©ÿßŸÜÿ™€åŸÜÿ±']
                },
                'vagrant': {
                    name: 'Ÿàÿß⁄Øÿ±ŸÜÿ™',
                    keywords: ['vagrant', 'Ÿàÿß⁄Øÿ±ŸÜÿ™', 'ŸÖÿßÿ¥€åŸÜ ŸÖÿ¨ÿßÿ≤€å']
                },
                'ansible': {
                    name: 'ÿßŸÜÿ≥€åÿ®ŸÑ',
                    keywords: ['ansible', 'ÿßŸÜÿ≥€åÿ®ŸÑ', 'ÿßÿ™ŸàŸÖÿßÿ≥€åŸàŸÜ']
                },
                'jenkins': {
                    name: 'ÿ¨ŸÜ⁄©€åŸÜÿ≤',
                    keywords: ['jenkins', 'ÿ¨ŸÜ⁄©€åŸÜÿ≤', '€å⁄©Ÿæÿßÿ±⁄ÜŸá‚Äåÿ≥ÿßÿ≤€å']
                },
                'npm': {
                    name: 'ÿßŸÜ‚ÄåŸæ€å‚ÄåÿßŸÖ',
                    keywords: ['npm', 'ÿßŸÜ Ÿæ€å ÿßŸÖ', 'ŸÖÿØ€åÿ±€åÿ™ Ÿæ⁄©€åÿ¨']
                },
                'yarn': {
                    name: '€åÿßÿ±ŸÜ',
                    keywords: ['yarn', '€åÿßÿ±ŸÜ', 'ŸÖÿØ€åÿ±€åÿ™ Ÿæ⁄©€åÿ¨']
                },
                'composer': {
                    name: '⁄©ÿßŸÖŸæŸàÿ≤ÿ±',
                    keywords: ['composer', '⁄©ÿßŸÖŸæŸàÿ≤ÿ±', 'ŸÖÿØ€åÿ±€åÿ™ Ÿæ⁄©€åÿ¨']
                },
                'gradle': {
                    name: '⁄Øÿ±€åÿØŸÑ',
                    keywords: ['gradle', '⁄Øÿ±€åÿØŸÑ', 'ÿ≥ÿßÿÆÿ™ ÿÆŸàÿØ⁄©ÿßÿ±']
                },
                
                // ÿ≥ÿÆÿ™‚ÄåÿßŸÅÿ≤ÿßÿ±
                'drivers': {
                    name: 'ÿØÿ±ÿß€åŸàÿ±Ÿáÿß',
                    keywords: ['drivers', 'ÿØÿ±ÿß€åŸàÿ±', 'ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤']
                },
                'gpu': {
                    name: 'ÿ¨€å‚ÄåŸæ€å‚Äå€åŸà',
                    keywords: ['gpu', 'ÿ¨€å Ÿæ€å €åŸà', '⁄©ÿßÿ±ÿ™ ⁄Øÿ±ÿßŸÅ€å⁄©']
                },
                'cpu': {
                    name: 'ÿ≥€å‚ÄåŸæ€å‚Äå€åŸà',
                    keywords: ['cpu', 'ÿ≥€å Ÿæ€å €åŸà', 'Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá']
                },
                'ram': {
                    name: 'ÿ±ŸÖ',
                    keywords: ['ram', 'ÿ±ŸÖ', 'ÿ≠ÿßŸÅÿ∏Ÿá']
                },
                'storage': {
                    name: 'ÿ∞ÿÆ€åÿ±Ÿá‚Äåÿ≥ÿßÿ≤€å',
                    keywords: ['storage', 'ÿ∞ÿÆ€åÿ±Ÿá ÿ≥ÿßÿ≤€å', 'Ÿáÿßÿ±ÿØ ÿØ€åÿ≥⁄©', 'ÿßÿ≥‚Äåÿßÿ≥‚ÄåÿØ€å']
                },
                'usb': {
                    name: '€åŸàÿßÿ≥‚Äåÿ®€å',
                    keywords: ['usb', '€åŸà ÿßÿ≥ ÿ®€å', 'ÿßÿ™ÿµÿßŸÑ €åŸàÿßÿ≥‚Äåÿ®€å']
                },
                'bluetooth': {
                    name: 'ÿ®ŸÑŸàÿ™Ÿàÿ´',
                    keywords: ['bluetooth', 'ÿ®ŸÑŸàÿ™Ÿàÿ´', 'ÿßÿ™ÿµÿßŸÑ ÿ®ŸÑŸàÿ™Ÿàÿ´']
                },
                'printer': {
                    name: 'Ÿæÿ±€åŸÜÿ™ÿ±',
                    keywords: ['printer', 'Ÿæÿ±€åŸÜÿ™ÿ±', '⁄ÜÿßŸæ⁄Øÿ±']
                },
                'scanner': {
                    name: 'ÿßÿ≥⁄©ŸÜÿ±',
                    keywords: ['scanner', 'ÿßÿ≥⁄©ŸÜÿ±', 'ÿßÿ≥⁄©ŸÜ']
                },
                'webcam': {
                    name: 'Ÿàÿ®‚Äå⁄©ŸÖ',
                    keywords: ['webcam', 'Ÿàÿ® ⁄©ŸÖ', 'ÿØŸàÿ±ÿ®€åŸÜ Ÿàÿ®']
                },
                
                // ŸÖÿ¨ÿßÿ≤€å‚Äåÿ≥ÿßÿ≤€å
                'virtualbox': {
                    name: 'Ÿàÿ±⁄ÜŸàÿßŸÑ‚Äåÿ®ÿß⁄©ÿ≥',
                    keywords: ['virtualbox', 'Ÿàÿ±⁄ÜŸàÿßŸÑ ÿ®ÿß⁄©ÿ≥', 'ŸÖÿßÿ¥€åŸÜ ŸÖÿ¨ÿßÿ≤€å']
                },
                'vmware': {
                    name: 'Ÿà€å‚ÄåÿßŸÖ‚ÄåŸàÿ±',
                    keywords: ['vmware', 'Ÿà€å ÿßŸÖ Ÿàÿ±', 'ŸÖÿßÿ¥€åŸÜ ŸÖÿ¨ÿßÿ≤€å']
                },
                'kvm': {
                    name: '⁄©€å‚ÄåŸà€å‚ÄåÿßŸÖ',
                    keywords: ['kvm', '⁄©€å Ÿà€å ÿßŸÖ', 'ŸÖÿßÿ¥€åŸÜ ŸÖÿ¨ÿßÿ≤€å']
                },
                'qemu': {
                    name: '⁄©€åŸàÿß€å‚ÄåÿßŸÖ‚Äå€åŸà',
                    keywords: ['qemu', '⁄©€åŸà ÿß€åŸÖŸà', 'ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤']
                },
                'xen': {
                    name: 'ÿ≤ŸÜ',
                    keywords: ['xen', 'ÿ≤ŸÜ', 'Ÿáÿß€åŸæÿ±Ÿàÿß€åÿ≤ÿ±']
                },
                'hyper-v': {
                    name: 'Ÿáÿß€åŸæÿ±-Ÿà€å',
                    keywords: ['hyper-v', 'Ÿáÿß€åŸæÿ± Ÿà€å', 'Ÿáÿß€åŸæÿ±Ÿàÿß€åÿ≤ÿ±']
                },
                'proxmox': {
                    name: 'Ÿæÿ±Ÿà⁄©ÿ≥‚ÄåŸÖŸà⁄©ÿ≥',
                    keywords: ['proxmox', 'Ÿæÿ±Ÿà⁄©ÿ≥ ŸÖŸà⁄©ÿ≥', 'Ÿáÿß€åŸæÿ±Ÿàÿß€åÿ≤ÿ±']
                },
                'lxc': {
                    name: 'ÿßŸÑ‚Äåÿß⁄©ÿ≥‚Äåÿ≥€å',
                    keywords: ['lxc', 'ÿßŸÑ ÿß⁄©ÿ≥ ÿ≥€å', '⁄©ÿßŸÜÿ™€åŸÜÿ± ŸÑ€åŸÜŸà⁄©ÿ≥']
                },
                'openvz': {
                    name: 'ÿßŸàŸæŸÜ‚ÄåŸà€å‚Äåÿ≤€å',
                    keywords: ['openvz', 'ÿßŸàŸæŸÜ Ÿà€å ÿ≤€å', '⁄©ÿßŸÜÿ™€åŸÜÿ±']
                },
                'vagrant': {
                    name: 'Ÿàÿß⁄Øÿ±ŸÜÿ™',
                    keywords: ['vagrant', 'Ÿàÿß⁄Øÿ±ŸÜÿ™', 'ŸÖÿ≠€åÿ∑ ÿ™Ÿàÿ≥ÿπŸá']
                },
                
                // ÿßÿ®ÿ±
                'aws': {
                    name: 'ÿß€å‚ÄåÿØÿ®ŸÑ€åŸàÿßÿ≥',
                    keywords: ['aws', 'ÿß€å ÿØÿ®ŸÑ€åŸà ÿßÿ≥', 'ÿ¢ŸÖÿßzon web services']
                },
                'azure': {
                    name: 'ÿ¢⁄òŸàÿ±',
                    keywords: ['azure', 'ÿ¢⁄òŸàÿ±', 'ŸÖÿß€å⁄©ÿ±Ÿàÿ≥ÿßŸÅÿ™ ÿ¢⁄òŸàÿ±']
                },
                'gcp': {
                    name: 'ÿ¨€å‚Äåÿ≥€å‚ÄåŸæ€å',
                    keywords: ['gcp', 'ÿ¨€å ÿ≥€å Ÿæ€å', 'google cloud platform']
                },
                'openstack': {
                    name: 'ÿßŸàŸæŸÜ‚Äåÿßÿ≥ÿ™⁄©',
                    keywords: ['openstack', 'ÿßŸàŸæŸÜ ÿßÿ≥ÿ™⁄©', 'ÿßÿ®ÿ± ÿÆÿµŸàÿµ€å']
                },
                'cloud-init': {
                    name: '⁄©ŸÑÿßÿØ-ÿß€åŸÜ€åÿ™',
                    keywords: ['cloud-init', '⁄©ŸÑÿßÿØ ÿß€åŸÜ€åÿ™', 'Ÿæ€å⁄©ÿ±ÿ®ŸÜÿØ€å ÿßÿ®ÿ±€å']
                },
                'terraform': {
                    name: 'ÿ™ÿ±ÿßŸÅŸàÿ±ŸÖ',
                    keywords: ['terraform', 'ÿ™ÿ±ÿßŸÅŸàÿ±ŸÖ', 'ÿ≤€åÿ±ÿ≥ÿßÿÆÿ™ ÿ®Ÿá ÿµŸàÿ±ÿ™ ⁄©ÿØ']
                },
                'packer': {
                    name: 'Ÿæ⁄©ÿ±',
                    keywords: ['packer', 'Ÿæ⁄©ÿ±', 'ÿ≥ÿßÿÆÿ™ ŸÖÿßÿ¥€åŸÜ ÿßÿ®ÿ±€å']
                },
                'consul': {
                    name: '⁄©ÿßŸÜÿ≥ŸàŸÑ',
                    keywords: ['consul', '⁄©ÿßŸÜÿ≥ŸàŸÑ', '⁄©ÿ¥ŸÅ ÿ≥ÿ±Ÿà€åÿ≥']
                },
                'vault': {
                    name: 'ŸàŸÑÿ™',
                    keywords: ['vault', 'ŸàŸÑÿ™', 'ŸÖÿØ€åÿ±€åÿ™ ÿßÿ≥ÿ±ÿßÿ±']
                },
                'nomad': {
                    name: 'ŸÜŸàŸÖÿØ',
                    keywords: ['nomad', 'ŸÜŸàŸÖÿØ', 'ÿßÿ±⁄©ÿ≥ÿ™ÿ±']
                }
            },
            
            // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ™⁄Ø‚ÄåŸáÿß ÿßÿ≤ ŸÖÿ≠ÿ™Ÿàÿß
            extractTags: function(content) {
                const tags = [];
                const text = content.toLowerCase();
                
                // ÿ®ÿ±ÿ±ÿ≥€å ÿ™ŸÖÿßŸÖ ÿ™⁄Ø‚ÄåŸáÿß
                for (const [tagId, tagData] of Object.entries(this.allTags)) {
                    for (const keyword of tagData.keywords) {
                        if (text.includes(keyword.toLowerCase())) {
                            tags.push({
                                id: tagId,
                                name: tagData.name
                            });
                            break;
                        }
                    }
                }
                
                // ÿ≠ÿ∞ŸÅ ÿ™⁄Ø‚ÄåŸáÿß€å ÿ™⁄©ÿ±ÿßÿ±€å
                return tags.filter((tag, index, self) =>
                    index === self.findIndex(t => t.id === tag.id)
                );
            },
            
            // ÿØÿ±€åÿßŸÅÿ™ ŸÜÿßŸÖ ÿ™⁄Ø ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ¥ŸÜÿßÿ≥Ÿá
            getTagName: function(tagId) {
                return this.allTags[tagId]?.name || tagId;
            }
        };
        
        // ŸÜŸÖÿß€åÿ¥ Ÿàÿ∂ÿπ€åÿ™ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å
        function showLoading() {
            document.getElementById('markdownContent').innerHTML = `
                <div class="loading flex flex-col items-center justify-center py-16">
                    <div class="spinner mb-4"></div>
                    <p class="text-gray-600">ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑŸá...</p>
                </div>
            `;
        }
        
        // ÿ™ÿßÿ®ÿπ ÿßÿµŸÑ€å ÿ®ÿ±ÿß€å ŸÖŸÇÿØÿßÿ±ÿØŸá€å ÿßŸàŸÑ€åŸá
        async function init() {
            console.log('Initializing viewer...');
            loadPreferences();
            showLoading();
            await loadAllFileNames();
            await loadFile();
            setupEventListeners();
            generateTableOfContents();
            updateViewCount();
            loadComments();
            loadRelatedArticles();
            setupReadingProgress();
        }
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ™ŸÜÿ∏€åŸÖÿßÿ™
        function loadPreferences() {
            isDarkMode = localStorage.getItem('isDarkMode') === 'true';
            fontSize = parseInt(localStorage.getItem('fontSize') || '16');
            currentViewMode = localStorage.getItem('viewMode') || 'normal';
            
            // ÿßÿπŸÖÿßŸÑ ÿ™ŸÜÿ∏€åŸÖÿßÿ™
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            }
            
            setViewMode(currentViewMode);
            setFontSize(fontSize);
        }
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÑ€åÿ≥ÿ™ ÿ™ŸÖÿßŸÖ ŸÅÿß€åŸÑ‚ÄåŸáÿß
        async function loadAllFileNames() {
            try {
                const GITHUB_API_BASE = 'https://api.github.com/repos/linuxpersian/linuxpersian.github.io/contents/wiki/source';
                const response = await fetch(GITHUB_API_BASE);
                
                if (!response.ok) {
                    throw new Error(`ÿÆÿ∑ÿß€å HTTP ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÑ€åÿ≥ÿ™ ŸÅÿß€åŸÑ‚ÄåŸáÿß! Ÿàÿ∂ÿπ€åÿ™: ${response.status}`);
                }
                
                const files = await response.json();
                allFileNames = files
                    .filter(file => file.name.endsWith('.md'))
                    .map(file => file.name)
                    .sort(); // ŸÖÿ±ÿ™ÿ®‚Äåÿ≥ÿßÿ≤€å ÿßŸÑŸÅÿ®ÿß€å€å ÿ®ÿ±ÿß€å ŸÜÿßŸàÿ®ÿ±€å ÿ®ÿπÿØ€å/ŸÇÿ®ŸÑ€å
                
                console.log('All file names loaded:', allFileNames);
            } catch (error) {
                console.error('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÑ€åÿ≥ÿ™ ŸÅÿß€åŸÑ‚ÄåŸáÿß:', error);
                showToast('ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÑ€åÿ≥ÿ™ ŸÅÿß€åŸÑ‚ÄåŸáÿß ÿ®ÿ±ÿß€å ŸÜÿßŸàÿ®ÿ±€å.', 'error');
            }
        }
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÅÿß€åŸÑ
        async function loadFile() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                let fileName = urlParams.get('file');
                
                if (!fileName) {
                    showError('ŸÜÿßŸÖ ŸÅÿß€åŸÑ ŸÖÿ¥ÿÆÿµ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.');
                    return;
                }
                
                // ÿßÿ∑ŸÖ€åŸÜÿßŸÜ ÿßÿ≤ ÿß€åŸÜ⁄©Ÿá ŸÜÿßŸÖ ŸÅÿß€åŸÑ ÿØÿßÿ±ÿß€å Ÿæÿ≥ŸàŸÜÿØ .md ÿßÿ≥ÿ™
                if (!fileName.endsWith('.md')) {
                    fileName += '.md';
                }
                
                currentFile = fileName;
                
                // ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ¢ÿØÿ±ÿ≥ ÿµÿ≠€åÿ≠ ⁄Ø€åÿ™‚ÄåŸáÿßÿ®
                const GITHUB_RAW_BASE = 'https://raw.githubusercontent.com/linuxpersian/linuxpersian.github.io/main/wiki/source';
                const fileUrl = `${GITHUB_RAW_BASE}/${fileName}`;
                
                console.log('Loading file from:', fileUrl);
                
                const response = await fetch(fileUrl);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('ŸÅÿß€åŸÑ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± €åÿßŸÅÿ™ ŸÜÿ¥ÿØ. ŸÖŸÖ⁄©ŸÜ ÿßÿ≥ÿ™ ÿ≠ÿ∞ŸÅ ÿ¥ÿØŸá €åÿß ŸÜÿßŸÖ ÿ¢ŸÜ ÿ™ÿ∫€å€åÿ± ⁄©ÿ±ÿØŸá ÿ®ÿßÿ¥ÿØ.');
                    } else {
                        throw new Error(`ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÅÿß€åŸÑ: ${response.status} - ${response.statusText}`);
                    }
                }
                
                const content = await response.text();
                currentContent = content;
                
                // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿπŸÜŸàÿßŸÜ
                const titleMatch = content.match(/^#\s+(.+)$/m);
                const title = titleMatch ? titleMatch[1].trim() : fileName.replace('.md', '');
                
                document.getElementById('articleTitle').textContent = title;
                document.title = `${title} - Ÿà€å⁄©€å ŸÑ€åŸÜŸà⁄©ÿ≥ ŸÅÿßÿ±ÿ≥€å`;
                
                // Ÿæÿ±ÿØÿßÿ≤ÿ¥ Ÿà ŸÜŸÖÿß€åÿ¥ ŸÖÿ≠ÿ™Ÿàÿß
                displayContent(content);
                
                // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ Ÿà ŸÜŸÖÿß€åÿ¥ ÿ™⁄Ø‚ÄåŸáÿß
                const tags = tagSystem.extractTags(content);
                displayTags(tags);
                
                // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿ™ÿß
                updateMetadata(content);
                
                // ÿ®ÿ±ÿ±ÿ≥€å Ÿàÿ∂ÿπ€åÿ™ ŸÜÿ¥ÿßŸÜ‚Äå⁄Øÿ∞ÿßÿ±€å
                checkBookmarkStatus();
                
                // ÿ®ÿßÿ≤€åÿßÿ®€å ŸÖŸàŸÇÿπ€åÿ™ ÿÆŸàÿßŸÜÿØŸÜ
                restoreReadingPosition();
                
                showToast('ŸÖŸÇÿßŸÑŸá ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ¥ÿØ.', 'success');
            } catch (error) {
                console.error('Error loading file:', error);
                showError(`ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑŸá: ${error.message}`);
            }
        }
        
        // ŸÜŸÖÿß€åÿ¥ ŸÖÿ≠ÿ™Ÿàÿß
        function displayContent(content) {
            try {
                // Ÿæ€å⁄©ÿ±ÿ®ŸÜÿØ€å marked.js
                marked.setOptions({
                    breaks: true,
                    gfm: true,
                    headerIds: true,
                    headerPrefix: 'heading-'
                });
                
                // ÿ™ÿ®ÿØ€åŸÑ ŸÖÿßÿ±⁄©‚ÄåÿØÿßŸÜ ÿ®Ÿá HTML
                let html = marked.parse(content);
                
                // Ÿæÿ±ÿØÿßÿ≤ÿ¥ HTML ÿ®ÿ±ÿß€å RTL Ÿà ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß
                html = processHTML(html);
                
                // ŸÜŸÖÿß€åÿ¥ ŸÖÿ≠ÿ™Ÿàÿß
                document.getElementById('markdownContent').innerHTML = html;
                
                // Ÿáÿß€åŸÑÿß€åÿ™ ⁄©ÿ±ÿØŸÜ ⁄©ÿØ
                Prism.highlightAll();
                
                // ÿßŸÅÿ≤ŸàÿØŸÜ ÿØ⁄©ŸÖŸá ⁄©Ÿæ€å ÿ®Ÿá ⁄©ÿØŸáÿß
                addCopyButtons();
                
                // ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±Ÿà€åÿØÿßÿØ ÿ®Ÿá ÿ™ÿµÿßŸà€åÿ± ÿ®ÿ±ÿß€å ŸÑÿß€åÿ™‚Äåÿ®ÿß⁄©ÿ≥
                setupImageLightbox();
            } catch (error) {
                console.error('Error processing content:', error);
                showError('ÿÆÿ∑ÿß ÿØÿ± Ÿæÿ±ÿØÿßÿ≤ÿ¥ ŸÖÿ≠ÿ™Ÿàÿß€å ŸÖŸÇÿßŸÑŸá.');
            }
        }
        
        // Ÿæÿ±ÿØÿßÿ≤ÿ¥ HTML
        function processHTML(html) {
            // ÿ™ŸÜÿ∏€åŸÖ ÿ¨Ÿáÿ™ ŸÖÿ™ŸÜ
            html = html.replace(/<p>/g, '<p dir="auto">');
            html = html.replace(/<h[1-6]>/g, '<h$1 dir="auto">');
            html = html.replace(/<li>/g, '<li dir="auto">');
            html = html.replace(/<blockquote>/g, '<blockquote dir="auto">');
            
            // ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿ™ÿµÿßŸà€åÿ±
            html = html.replace(/<img/g, '<img class="rounded-lg shadow-lg my-4 cursor-pointer"');
            
            // ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿ¨ÿØÿßŸàŸÑ
            html = html.replace(/<table>/g, '<table class="w-full border-collapse my-6">');
            html = html.replace(/<th>/g, '<th class="border px-4 py-2 bg-gray-100 dark:bg-gray-700">');
            html = html.replace(/<td>/g, '<td class="border px-4 py-2">');
            
            // ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ⁄©ÿØ
            html = html.replace(/<pre>/g, '<pre class="rounded-lg overflow-x-auto my-4">');
            html = html.replace(/<code>/g, '<code class="rounded">');
            
            return html;
        }
        
        // ÿßŸÅÿ≤ŸàÿØŸÜ ÿØ⁄©ŸÖŸá ⁄©Ÿæ€å ÿ®Ÿá ⁄©ÿØŸáÿß
        function addCopyButtons() {
            document.querySelectorAll('pre').forEach(pre => {
                const button = document.createElement('button');
                button.className = 'copy-code-btn';
                button.textContent = '⁄©Ÿæ€å';
                button.onclick = () => copyCode(pre);
                pre.appendChild(button);
            });
        }
        
        // ⁄©Ÿæ€å ⁄©ÿ±ÿØŸÜ ⁄©ÿØ
        function copyCode(pre) {
            const code = pre.querySelector('code');
            const text = code.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('⁄©ÿØ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ⁄©Ÿæ€å ÿ¥ÿØ.', 'success');
            }).catch(err => {
                console.error('Error copying code:', err);
                showToast('ÿÆÿ∑ÿß ÿØÿ± ⁄©Ÿæ€å ⁄©ÿ±ÿØŸÜ ⁄©ÿØ.', 'error');
            });
        }
        
        // ÿ™ŸÜÿ∏€åŸÖ ŸÑÿß€åÿ™‚Äåÿ®ÿß⁄©ÿ≥ ÿ™ÿµÿßŸà€åÿ±
        function setupImageLightbox() {
            document.querySelectorAll('.markdown-content img').forEach(img => {
                img.addEventListener('click', () => {
                    document.getElementById('lightboxImage').src = img.src;
                    document.getElementById('lightbox').style.display = 'flex';
                });
            });
        }
        
        // ÿ®ÿ≥ÿ™ŸÜ ŸÑÿß€åÿ™‚Äåÿ®ÿß⁄©ÿ≥
        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }
        
        // ÿ™ŸàŸÑ€åÿØ ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ®
        function generateTableOfContents() {
            const headings = document.querySelectorAll('.markdown-content h1, .markdown-content h2, .markdown-content h3');
            const toc = document.getElementById('tableOfContents');
            
            if (headings.length === 0) {
                toc.innerHTML = '<p class="text-gray-500">ŸÅŸáÿ±ÿ≥ÿ™ ŸÖÿ∑ÿßŸÑÿ®€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.</p>';
                return;
            }
            
            toc.innerHTML = '';
            
            headings.forEach((heading, index) => {
                const level = parseInt(heading.tagName.substring(1));
                const text = heading.textContent;
                const id = heading.id || `heading-${index}`;
                
                heading.id = id;
                
                const item = document.createElement('div');
                item.className = 'toc-item';
                item.style.paddingRight = `${(level - 1) * 1}rem`;
                
                const link = document.createElement('a');
                link.href = `#${id}`;
                link.className = 'toc-link';
                link.textContent = text;
                link.onclick = (e) => {
                    e.preventDefault();
                    heading.scrollIntoView({ behavior: 'smooth' });
                    
                    // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÑ€åŸÜ⁄© ŸÅÿπÿßŸÑ
                    document.querySelectorAll('.toc-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                };
                
                item.appendChild(link);
                toc.appendChild(item);
            });
        }
        
        // ŸÜŸÖÿß€åÿ¥ ÿ™⁄Ø‚ÄåŸáÿß
        function displayTags(tags) {
            const tagsContainer = document.getElementById('tagsCloud');
            
            if (tags.length === 0) {
                tagsContainer.innerHTML = '<p class="text-gray-500">ÿ™⁄Ø€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.</p>';
                return;
            }
            
            tagsContainer.innerHTML = '';
            
            tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag';
                tagElement.textContent = tag.name;
                tagElement.onclick = () => filterByTag(tag.id);
                tagsContainer.appendChild(tagElement);
            });
        }
        
        // ŸÅ€åŸÑÿ™ÿ± ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ™⁄Ø
        function filterByTag(tagId) {
            showToast(`ŸÜŸÖÿß€åÿ¥ ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ÿß: ${tagSystem.getTagName(tagId)}`, 'info');
            // ÿØÿ± ÿß€åŸÜÿ¨ÿß ŸÖ€å‚Äåÿ™ŸàÿßŸÜ ŸÖŸÜÿ∑ŸÇ ŸÅ€åŸÑÿ™ÿ± ⁄©ÿ±ÿØŸÜ ÿ±ÿß Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ⁄©ÿ±ÿØ
        }
        
        // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿ™ÿß
        function updateMetadata(content) {
            // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ÿ≤ŸÖÿßŸÜ ÿÆŸàÿßŸÜÿØŸÜ
            const wordsPerMinute = 200;
            const wordCount = content.split(/\s+/).length;
            const readingTime = Math.ceil(wordCount / wordsPerMinute);
            
            // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÜŸÖÿß€åÿ¥
            document.getElementById('metaDate').textContent = new Date().toLocaleDateString('fa-IR');
            document.getElementById('metaReadingTime').textContent = `${readingTime} ÿØŸÇ€åŸÇŸá`;
            document.getElementById('metaWordCount').textContent = `${wordCount.toLocaleString('fa-IR')} ⁄©ŸÑŸÖŸá`;
            document.getElementById('metaViews').textContent = '1,234 ÿ®ÿßÿ≤ÿØ€åÿØ';
            document.getElementById('metaRating').textContent = '4.7/5';
        }
        
        // ÿ®ÿ±ÿ±ÿ≥€å Ÿàÿ∂ÿπ€åÿ™ ŸÜÿ¥ÿßŸÜ‚Äå⁄Øÿ∞ÿßÿ±€å
        function checkBookmarkStatus() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            isBookmarked = bookmarks.includes(currentFile);
            
            const icon = document.getElementById('bookmarkIcon');
            if (isBookmarked) {
                icon.classList.add('fas');
                icon.classList.remove('far');
            } else {
                icon.classList.add('far');
                icon.classList.remove('fas');
            }
        }
        
        // ÿ™ÿ∫€å€åÿ± Ÿàÿ∂ÿπ€åÿ™ ŸÜÿ¥ÿßŸÜ‚Äå⁄Øÿ∞ÿßÿ±€å
        function toggleBookmark() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            
            if (isBookmarked) {
                // ÿ≠ÿ∞ŸÅ ÿßÿ≤ ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß
                const index = bookmarks.indexOf(currentFile);
                if (index > -1) {
                    bookmarks.splice(index, 1);
                }
                showToast('ÿßÿ≤ ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 'info');
            } else {
                // ÿßŸÅÿ≤ŸàÿØŸÜ ÿ®Ÿá ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß
                bookmarks.push(currentFile);
                showToast('ÿ®Ÿá ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß ÿßŸÅÿ≤ŸàÿØŸá ÿ¥ÿØ.', 'success');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            isBookmarked = !isBookmarked;
            checkBookmarkStatus();
        }
        
        // ÿ®ÿßÿ≤€åÿßÿ®€å ŸÖŸàŸÇÿπ€åÿ™ ÿÆŸàÿßŸÜÿØŸÜ
        function restoreReadingPosition() {
            const position = localStorage.getItem(`readingPosition_${currentFile}`);
            if (position) {
                window.scrollTo(0, parseInt(position));
            }
        }
        
        // ÿ∞ÿÆ€åÿ±Ÿá ŸÖŸàŸÇÿπ€åÿ™ ÿÆŸàÿßŸÜÿØŸÜ
        function saveReadingPosition() {
            if (currentFile) {
                localStorage.setItem(`readingPosition_${currentFile}`, window.scrollY);
            }
        }
        
        // ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ŸÖŸÇÿßŸÑŸá
        function searchInArticle() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!query) {
                clearSearchHighlights();
                return;
            }
            
            // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ Ÿáÿß€åŸÑÿß€åÿ™‚ÄåŸáÿß€å ŸÇÿ®ŸÑ€å
            clearSearchHighlights();
            
            // ÿ¨ÿ≥ÿ™ÿ¨Ÿà Ÿà Ÿáÿß€åŸÑÿß€åÿ™
            const content = document.getElementById('markdownContent');
            const walker = document.createTreeWalker(
                content,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );
            
            const regex = new RegExp(`(${query})`, 'gi');
            searchHighlights = [];
            
            while (walker.nextNode()) {
                const node = walker.currentNode;
                const text = node.textContent;
                
                if (text.toLowerCase().includes(query)) {
                    const span = document.createElement('span');
                    span.innerHTML = text.replace(regex, '<span class="search-highlight">$1</span>');
                    node.parentNode.replaceChild(span, node);
                    
                    // ÿ∞ÿÆ€åÿ±Ÿá ŸÖŸàŸÇÿπ€åÿ™‚ÄåŸáÿß€å Ÿáÿß€åŸÑÿß€åÿ™
                    const highlights = span.querySelectorAll('.search-highlight');
                    highlights.forEach(highlight => {
                        searchHighlights.push(highlight);
                    });
                }
            }
            
            // ÿßÿ≥⁄©ÿ±ŸàŸÑ ÿ®Ÿá ÿßŸàŸÑ€åŸÜ ŸÜÿ™€åÿ¨Ÿá
            if (searchHighlights.length > 0) {
                currentSearchIndex = 0;
                searchHighlights[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
                showToast(`${searchHighlights.length} ŸÜÿ™€åÿ¨Ÿá €åÿßŸÅÿ™ ÿ¥ÿØ.`, 'success');
            } else {
                showToast('Ÿá€å⁄Ü ŸÜÿ™€åÿ¨Ÿá‚Äåÿß€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.', 'error');
            }
        }
        
        // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ Ÿáÿß€åŸÑÿß€åÿ™‚ÄåŸáÿß€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà
        function clearSearchHighlights() {
            const highlights = document.querySelectorAll('.search-highlight');
            highlights.forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
            searchHighlights = [];
        }
        
        // ÿ™ŸÜÿ∏€åŸÖ ÿ±Ÿà€åÿØÿßÿØŸáÿß
        function setupEventListeners() {
            // ÿ±Ÿà€åÿØÿßÿØ ÿßÿ≥⁄©ÿ±ŸàŸÑ ÿ®ÿ±ÿß€å ÿ∞ÿÆ€åÿ±Ÿá ŸÖŸàŸÇÿπ€åÿ™ ÿÆŸàÿßŸÜÿØŸÜ Ÿà ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™
            window.addEventListener('scroll', () => {
                if (document.getElementById('autoSave')?.checked) {
                    saveReadingPosition();
                }
                updateReadingProgress();
            });
            
            // ÿ±Ÿà€åÿØÿßÿØ ⁄©ŸÑ€åÿØ ÿ®ÿ±ÿß€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà
            document.getElementById('searchInput').addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    searchInArticle();
                }
                if (e.key === 'Escape') {
                    clearSearchHighlights();
                    document.getElementById('searchInput').value = '';
                }
            });
            
            // ÿ±Ÿà€åÿØÿßÿØ ÿ™ÿ∫€å€åÿ± ÿßŸÜÿØÿßÿ≤Ÿá ŸÅŸàŸÜÿ™
            document.getElementById('justifyText')?.addEventListener('change', (e) => {
                const content = document.getElementById('markdownContent');
                if (e.target.checked) {
                    content.style.textAlign = 'justify';
                } else {
                    content.style.textAlign = 'right';
                }
            });
            
            // ÿ±Ÿà€åÿØÿßÿØ ÿ™ÿ∫€å€åÿ± ÿ¥ŸÖÿßÿ±Ÿá ÿÆÿ∑Ÿàÿ∑ ⁄©ÿØ
            document.getElementById('lineNumbers')?.addEventListener('change', (e) => {
                const codes = document.querySelectorAll('pre code');
                codes.forEach(code => {
                    if (e.target.checked) {
                        // ÿßŸÅÿ≤ŸàÿØŸÜ ÿ¥ŸÖÿßÿ±Ÿá ÿÆÿ∑Ÿàÿ∑
                        const lines = code.textContent.split('\n');
                        const numberedLines = lines.map((line, i) => {
                            return `<span class="line-number">${i + 1}</span>${line}`;
                        }).join('\n');
                        code.innerHTML = numberedLines;
                    } else {
                        // ÿ≠ÿ∞ŸÅ ÿ¥ŸÖÿßÿ±Ÿá ÿÆÿ∑Ÿàÿ∑
                        const lines = code.innerHTML.split('\n');
                        const cleanLines = lines.map(line => {
                            return line.replace(/<span class="line-number">\d+<\/span>/, '');
                        }).join('\n');
                        code.innerHTML = cleanLines;
                    }
                });
            });
            
            // ÿ±Ÿà€åÿØÿßÿØŸáÿß€å ⁄©€åÿ®Ÿàÿ±ÿØ
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + K ÿ®ÿ±ÿß€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
                
                // Ctrl/Cmd + D ÿ®ÿ±ÿß€å ÿ≠ÿßŸÑÿ™ ÿ™ÿßÿ±€å⁄©
                if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                    e.preventDefault();
                    toggleDarkMode();
                }
                
                // Ctrl/Cmd + P ÿ®ÿ±ÿß€å ⁄ÜÿßŸæ
                if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                    e.preventDefault();
                    window.print();
                }
                
                // Ctrl/Cmd + S ÿ®ÿ±ÿß€å ÿ∞ÿÆ€åÿ±Ÿá
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    downloadMarkdown();
                }
                
                // Ctrl/Cmd + B ÿ®ÿ±ÿß€å ŸÜÿ¥ÿßŸÜ‚Äå⁄Øÿ∞ÿßÿ±€å
                if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
                    e.preventDefault();
                    toggleBookmark();
                }
                
                // F3 ÿ®ÿ±ÿß€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ÿ®ÿπÿØ€å
                if (e.key === 'F3' && searchHighlights.length > 0) {
                    e.preventDefault();
                    navigateSearchResults(1);
                }
                
                // Shift + F3 ÿ®ÿ±ÿß€å ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ŸÇÿ®ŸÑ€å
                if (e.key === 'F3' && e.shiftKey && searchHighlights.length > 0) {
                    e.preventDefault();
                    navigateSearchResults(-1);
                }
            });
        }
        
        // ŸÜÿßŸàÿ®ÿ±€å ŸÜÿ™ÿß€åÿ¨ ÿ¨ÿ≥ÿ™ÿ¨Ÿà
        function navigateSearchResults(direction) {
            if (searchHighlights.length === 0) return;
            
            currentSearchIndex += direction;
            
            if (currentSearchIndex >= searchHighlights.length) {
                currentSearchIndex = 0;
            } else if (currentSearchIndex < 0) {
                currentSearchIndex = searchHighlights.length - 1;
            }
            
            searchHighlights[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // ÿ™ÿ∫€å€åÿ± ÿ≠ÿßŸÑÿ™ ŸÜŸÖÿß€åÿ¥
        function setViewMode(mode) {
            currentViewMode = mode;
            localStorage.setItem('viewMode', mode);
            
            // ÿ≠ÿ∞ŸÅ ÿ™ŸÖÿßŸÖ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ≠ÿßŸÑÿ™
            document.body.classList.remove('reading-mode', 'night-mode', 'focus-mode');
            
            // ÿßŸÅÿ≤ŸàÿØŸÜ ⁄©ŸÑÿßÿ≥ ÿ≠ÿßŸÑÿ™ ÿ¨ÿØ€åÿØ
            switch (mode) {
                case 'reading':
                    document.body.classList.add('reading-mode');
                    break;
                case 'night':
                    document.body.classList.add('night-mode');
                    break;
                case 'focus':
                    document.body.classList.add('focus-mode');
                    break;
            }
            
            // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ
            document.querySelectorAll('.view-mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.view-mode-btn').classList.add('active');
        }
        
        // ÿ™ÿ∫€å€åÿ± ÿ≠ÿßŸÑÿ™ ÿ™ÿßÿ±€å⁄©
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('isDarkMode', isDarkMode);
            
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }
        
        // ÿ™ÿ∫€å€åÿ± ÿßŸÜÿØÿßÿ≤Ÿá ŸÅŸàŸÜÿ™
        function setFontSize(size) {
            fontSize = size;
            localStorage.setItem('fontSize', size);
            document.getElementById('markdownContent').style.fontSize = `${size}px`;
        }
        
        function increaseFontSize() {
            if (fontSize < 24) {
                setFontSize(fontSize + 2);
            }
        }
        
        function decreaseFontSize() {
            if (fontSize > 12) {
                setFontSize(fontSize - 2);
            }
        }
        
        // ŸÖÿ™ŸÜ ÿ®Ÿá ⁄ØŸÅÿ™ÿßÿ± (TTS)
        function toggleTTS() {
            if (!ttsEnabled) {
                startTTS();
            } else {
                stopTTS();
            }
        }
        
        function startTTS() {
            if ('speechSynthesis' in window) {
                const content = document.getElementById('markdownContent').innerText;
                const utterance = new SpeechSynthesisUtterance(content);
                utterance.lang = 'fa-IR';
                utterance.rate = 0.9;
                
                speechSynthesis.speak(utterance);
                ttsEnabled = true;
                
                showToast('ÿ¥ÿ±Ÿàÿπ ÿÆŸàÿßŸÜÿØŸÜ ŸÖÿ™ŸÜ...', 'info');
                
                utterance.onend = () => {
                    ttsEnabled = false;
                    showToast('Ÿæÿß€åÿßŸÜ ÿÆŸàÿßŸÜÿØŸÜ ŸÖÿ™ŸÜ.', 'info');
                };
            } else {
                showToast('ŸÖÿ±Ÿàÿ±⁄Øÿ± ÿ¥ŸÖÿß ÿßÿ≤ ŸÖÿ™ŸÜ ÿ®Ÿá ⁄ØŸÅÿ™ÿßÿ± Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸÜŸÖ€å‚Äå⁄©ŸÜÿØ.', 'error');
            }
        }
        
        function stopTTS() {
            speechSynthesis.cancel();
            ttsEnabled = false;
            showToast('ÿ™ŸàŸÇŸÅ ÿÆŸàÿßŸÜÿØŸÜ ŸÖÿ™ŸÜ.', 'info');
        }
        
        // ÿßÿ¥ÿ™ÿ±ÿß⁄©‚Äå⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑŸá
        function shareArticle() {
            if (navigator.share) {
                navigator.share({
                    title: document.getElementById('articleTitle').textContent,
                    text: 'ŸÖŸÇÿßŸÑŸá ÿ¨ÿßŸÑÿ®€å ÿßÿ≤ Ÿà€å⁄©€å ŸÑ€åŸÜŸà⁄©ÿ≥ ŸÅÿßÿ±ÿ≥€å',
                    url: window.location.href
                })
                .then(() => showToast('ŸÖŸÇÿßŸÑŸá ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿá ÿßÿ¥ÿ™ÿ±ÿß⁄© ⁄Øÿ∞ÿßÿ¥ÿ™Ÿá ÿ¥ÿØ.', 'success'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                // ⁄©Ÿæ€å ⁄©ÿ±ÿØŸÜ ŸÑ€åŸÜ⁄© ÿ®Ÿá ⁄©ŸÑ€åŸæ‚Äåÿ®Ÿàÿ±ÿØ
                navigator.clipboard.writeText(window.location.href)
                    .then(() => showToast('ŸÑ€åŸÜ⁄© ŸÖŸÇÿßŸÑŸá ⁄©Ÿæ€å ÿ¥ÿØ.', 'success'))
                    .catch(() => showToast('ÿÆÿ∑ÿß ÿØÿ± ⁄©Ÿæ€å ŸÑ€åŸÜ⁄©.', 'error'));
            }
        }
        
        // ÿØÿßŸÜŸÑŸàÿØ ŸÖÿßÿ±⁄©‚ÄåÿØÿßŸÜ
        function downloadMarkdown() {
            if (!currentContent) {
                showToast('ŸÖÿ≠ÿ™Ÿàÿß€å€å ÿ®ÿ±ÿß€å ÿØÿßŸÜŸÑŸàÿØ Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ.', 'error');
                return;
            }
            
            const blob = new Blob([currentContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentFile;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('ŸÅÿß€åŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿØÿßŸÜŸÑŸàÿØ ÿ¥ÿØ.', 'success');
        }
        
        // ÿßÿ≥⁄©ÿ±ŸàŸÑ ÿ®Ÿá ÿ®ÿßŸÑÿß
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÖŸàÿØÿßŸÑ
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        // ÿ®ÿ≥ÿ™ŸÜ ŸÖŸàÿØÿßŸÑ
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // ÿ™ŸÜÿ∏€åŸÖ ÿ™ŸÖ ÿ±ŸÜ⁄Ø€å
        function setTheme(theme) {
            // ÿ≠ÿ∞ŸÅ ⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ ÿßÿ≤ ÿ™ŸÖÿßŸÖ ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // ÿßŸÅÿ≤ŸàÿØŸÜ ⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ ÿ®Ÿá ⁄Øÿ≤€åŸÜŸá ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá
            document.querySelector(`.theme-${theme}`).classList.add('active');
            
            // ÿØÿ± ÿß€åŸÜÿ¨ÿß ŸÖ€å‚Äåÿ™ŸàÿßŸÜ ŸÖŸÜÿ∑ŸÇ ÿ™ÿ∫€å€åÿ± ÿ™ŸÖ ÿ±ÿß Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ⁄©ÿ±ÿØ
            localStorage.setItem('theme', theme);
            showToast(`ÿ™ŸÖ ${theme} ÿßÿπŸÖÿßŸÑ ÿ¥ÿØ.`, 'success');
        }
        
        // ÿ∞ÿÆ€åÿ±Ÿá ÿ™ŸÜÿ∏€åŸÖÿßÿ™
        function saveSettings() {
            const settings = {
                isDarkMode: isDarkMode,
                fontSize: fontSize,
                viewMode: currentViewMode,
                theme: localStorage.getItem('theme') || 'default',
                justifyText: document.getElementById('justifyText')?.checked || false,
                lineNumbers: document.getElementById('lineNumbers')?.checked || false,
                autoSave: document.getElementById('autoSave')?.checked || true,
                loadImages: document.getElementById('loadImages')?.checked || true
            };
            
            localStorage.setItem('settings', JSON.stringify(settings));
            closeModal('settingsModal');
            showToast('ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ.', 'success');
        }
        
        // ŸÜŸÖÿß€åÿ¥ ÿßÿπŸÑÿßŸÜ
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            toastContainer.appendChild(toast);
            
            // ÿ≠ÿ∞ŸÅ ÿßÿπŸÑÿßŸÜ Ÿæÿ≥ ÿßÿ≤ 3 ÿ´ÿßŸÜ€åŸá
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    toastContainer.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // ŸÜŸÖÿß€åÿ¥ ÿÆÿ∑ÿß
        function showError(message) {
            showToast(message, 'error');
            document.getElementById('markdownContent').innerHTML = `
                <div class="error-message p-8 bg-red-50 dark:bg-red-900/20 rounded-lg text-center">
                    <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
                    <h2 class="text-xl font-bold text-red-700 dark:text-red-300 mb-2">ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑŸá</h2>
                    <p class="text-red-600 dark:text-red-400">${message}</p>
                    <button class="mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition" onclick="window.history.back()">
                        ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </button>
                </div>
            `;
        }
        
        // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ™ÿπÿØÿßÿØ ÿ®ÿßÿ≤ÿØ€åÿØ
        function updateViewCount() {
            // ÿØÿ± €å⁄© Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸàÿßŸÇÿπ€åÿå ÿß€åŸÜ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿßÿ≤ ÿ≥ÿ±Ÿàÿ± ÿØÿ±€åÿßŸÅÿ™ ŸÖ€å‚Äåÿ¥ŸàÿØ
            // ÿß€åŸÜÿ¨ÿß ŸÅŸÇÿ∑ €å⁄© ŸÜŸÖÿß€åÿ¥ ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ¥ÿØŸá ÿßÿ≥ÿ™
            const viewsElement = document.getElementById('metaViews');
            if (viewsElement) {
                const currentViews = parseInt(viewsElement.textContent.replace(/[^\d]/g, ''));
                const newViews = currentViews + 1;
                viewsElement.textContent = `${newViews.toLocaleString('fa-IR')} ÿ®ÿßÿ≤ÿØ€åÿØ`;
            }
        }
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÜÿ∏ÿ±ÿßÿ™
        function loadComments() {
            const commentsList = document.getElementById('commentsList');
            
            // ÿØÿ± €å⁄© Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸàÿßŸÇÿπ€åÿå ŸÜÿ∏ÿ±ÿßÿ™ ÿßÿ≤ ÿ≥ÿ±Ÿàÿ± ÿØÿ±€åÿßŸÅÿ™ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ
            // ÿß€åŸÜÿ¨ÿß ⁄ÜŸÜÿØ ŸÜÿ∏ÿ± ŸÜŸÖŸàŸÜŸá ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ
            const sampleComments = [
                {
                    author: 'ÿπŸÑ€å ÿ±ÿ∂ÿß€å€å',
                    date: '€±€¥€∞€≤/€∞€µ/€±€∞',
                    text: 'ŸÖŸÇÿßŸÑŸá ÿ®ÿ≥€åÿßÿ± ŸÖŸÅ€åÿØ€å ÿ®ŸàÿØ. ŸÖŸÖŸÜŸàŸÜ ÿßÿ≤ ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ⁄©ÿßŸÖŸÑ ÿ¥ŸÖÿß.'
                },
                {
                    author: 'ÿ≥ÿßÿ±ÿß ŸÖÿ≠ŸÖÿØ€å',
                    date: '€±€¥€∞€≤/€∞€µ/€∞€∏',
                    text: 'ŸÖŸÜ ÿßÿ≤ ÿß€åŸÜ ÿ±ÿßŸáŸÜŸÖÿß ÿ®ÿ±ÿß€å ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å ÿ≥ÿ±Ÿàÿ± ÿÆŸàÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ÿ±ÿØŸÖ Ÿà ÿÆ€åŸÑ€å ŸÖŸÅ€åÿØ ÿ®ŸàÿØ.'
                },
                {
                    author: 'ÿ±ÿ∂ÿß ŸÇÿßÿ≥ŸÖ€å',
                    date: '€±€¥€∞€≤/€∞€µ/€∞€µ',
                    text: 'ÿ¢€åÿß ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ŸÜÿ≥ÿÆŸá Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá‚Äåÿ™ÿ±€å ÿßÿ≤ ÿß€åŸÜ ŸÖŸÇÿßŸÑŸá ŸÖŸÜÿ™ÿ¥ÿ± ⁄©ŸÜ€åÿØÿü'
                }
            ];
            
            commentsList.innerHTML = '';
            
            sampleComments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment';
                commentElement.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-author">${comment.author}</div>
                        <div class="comment-date">${comment.date}</div>
                    </div>
                    <div class="comment-text">${comment.text}</div>
                `;
                commentsList.appendChild(commentElement);
            });
        }
        
        // ÿßÿ±ÿ≥ÿßŸÑ ŸÜÿ∏ÿ±
        function submitComment() {
            const commentInput = document.getElementById('commentInput');
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                showToast('ŸÑÿ∑ŸÅÿßŸã ŸÖÿ™ŸÜ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ.', 'error');
                return;
            }
            
            // ÿØÿ± €å⁄© Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸàÿßŸÇÿπ€åÿå ŸÜÿ∏ÿ± ÿ®Ÿá ÿ≥ÿ±Ÿàÿ± ÿßÿ±ÿ≥ÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ
            // ÿß€åŸÜÿ¨ÿß ŸÅŸÇÿ∑ €å⁄© ŸÜŸÖÿß€åÿ¥ ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ¥ÿØŸá ÿßÿ≥ÿ™
            const commentsList = document.getElementById('commentsList');
            const newComment = document.createElement('div');
            newComment.className = 'comment';
            newComment.innerHTML = `
                <div class="comment-header">
                    <div class="comment-author">⁄©ÿßÿ±ÿ®ÿ± ŸÖŸáŸÖÿßŸÜ</div>
                    <div class="comment-date">${new Date().toLocaleDateString('fa-IR')}</div>
                </div>
                <div class="comment-text">${commentText}</div>
            `;
            
            commentsList.insertBefore(newComment, commentsList.firstChild);
            commentInput.value = '';
            
            showToast('ŸÜÿ∏ÿ± ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ.', 'success');
        }
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑
        function loadRelatedArticles() {
            const relatedContainer = document.getElementById('relatedArticles');
            
            // ÿØÿ± €å⁄© Ÿæ€åÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸàÿßŸÇÿπ€åÿå ŸÖŸÇÿßŸÑÿßÿ™ ŸÖÿ±ÿ™ÿ®ÿ∑ ÿßÿ≤ ÿ≥ÿ±Ÿàÿ± ÿØÿ±€åÿßŸÅÿ™ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ
            // ÿß€åŸÜÿ¨ÿß ⁄ÜŸÜÿØ ŸÖŸÇÿßŸÑŸá ŸÜŸÖŸàŸÜŸá ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ
            const sampleArticles = [
                {
                    title: 'ŸÜÿµÿ® ÿßŸàÿ®ŸàŸÜÿ™Ÿà €≤€≤.€∞€¥',
                    url: 'viewer.html?file=ubuntu-install.md'
                },
                {
                    title: 'Ÿæ€å⁄©ÿ±ÿ®ŸÜÿØ€å ŸÅÿß€åÿ±ŸàÿßŸÑ ÿØÿ± ŸÑ€åŸÜŸà⁄©ÿ≥',
                    url: 'viewer.html?file=firewall-config.md'
                },
                {
                    title: 'ŸÖÿØ€åÿ±€åÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿØÿ± ŸÑ€åŸÜŸà⁄©ÿ≥',
                    url: 'viewer.html?file=user-management.md'
                }
            ];
            
            relatedContainer.innerHTML = '';
            
            sampleArticles.forEach(article => {
                const articleElement = document.createElement('div');
                articleElement.className = 'mb-2';
                articleElement.innerHTML = `
                    <a href="${article.url}" class="text-blue-600 hover:text-blue-800 hover:underline">
                        ${article.title}
                    </a>
                `;
                relatedContainer.appendChild(articleElement);
            });
        }
        
        // ÿ™ŸÜÿ∏€åŸÖ ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿÆŸàÿßŸÜÿØŸÜ
        function setupReadingProgress() {
            window.addEventListener('scroll', updateReadingProgress);
        }
        
        // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿÆŸàÿßŸÜÿØŸÜ
        function updateReadingProgress() {
            const scrollTop = window.pageYOffset;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            
            document.getElementById('readingProgressBar').style.width = `${scrollPercent}%`;
        }
        
        // ÿßÿ¨ÿ±ÿß€å ÿ™ÿßÿ®ÿπ ŸÖŸÇÿØÿßÿ±ÿØŸá€å ÿßŸàŸÑ€åŸá Ÿæÿ≥ ÿßÿ≤ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿµŸÅÿ≠Ÿá
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
